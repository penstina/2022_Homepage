"use strict";window.npValidation=window.npValidation||{},$(document).ready(function(){window.npValidation.inputValidationOnFields()}),window.npValidation.inputValidationOnFields=function(e){var t=new RegExp(/^[a-zA-Z]+$/),n=new RegExp(/^[a-zA-Z'\s]+$/),o=new RegExp(/^([a-zA-Z0-9 ]+)$/),r=new RegExp(/^[a-zA-Z ]+$/),a=new RegExp(/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,})$/),i=new RegExp(/^[0-9]{10,12}$/),c=new RegExp(/^.{8,64}$/),s=new RegExp(/^.{1,64}$/),d={name_regex:{type:t,errorMssg:window.customValidation.nameValidationMsg},multi_word_name_regex:{type:n,errorMssg:window.customValidation.multiWordNameValidationMsg},alphaNumericRegex:{type:o,errorMssg:window.customValidation.alphaNumericValidationMsg},alphaRegexWithSpace:{type:r,errorMssg:window.customValidation.multiWordNameValidationMsg},email_regex:{type:a,errorMssg:window.customValidation.emailValidationMsg},phone_regex:{type:i,errorMssg:window.customValidation.phoneNumberErrorMsg},password_validation:{type:c,errorMssg:window.customValidation.passwordValidationMsg},password_simple_validation:{type:s,errorMssg:window.customValidation.validPasswordMsg}};d=$.extend(!0,{},d,window.siteRegex),(e&&e.length>0?e.find("input[data-regex]"):$("input[data-regex]")).off("change.inputValidation").on("change.inputValidation",function(e){var t=$(e.currentTarget),n=e.currentTarget.id,o=e.target.getAttribute("data-regex"),r=e.target.getAttribute("data-error");r&&""!=r||(r=d[o]?d[o].errorMssg:"Please enter a valid value"),o=d[o]?new RegExp(d[o].type):"";var a=window.customValidation.validationpassword_mismatch;if("con_password"==n){if($("#"+n+"_error").remove(),$("#reg_password").val()!=t.val())return t.after('<div id="'+n+'_error" class="error">'+a+"</div>"),t.attr("hasError",!0),t.addClass("danger-warn"),!1}else if("confirm-password-reset"==n){if($("#"+n+"_error").remove(),$("#password-reset").val()!=t.val())return t.after('<div id="'+n+'_error" class="error">'+a+"</div>"),t.attr("hasError",!0),t.addClass("danger-warn"),!1}else"password-reset"==n&&$("#confirm-password-reset").val()==t.val()&&($("#confirm-password-reset_error").remove(),$("#confirm-password-reset").attr("hasError",!1),$("#confirm-password-reset").removeClass("danger-warn"));if(o&&""!=o&&""!=t.val().trim()&&!o.test(t.val().trim()))return $("#"+n+"_error").remove(),"user-email"===n?$('label[for="user-email"]').after('<div id="'+n+'_error" class="error">'+r+"</div>"):t.after('<div id="'+n+'_error" class="error">'+r+"</div>"),t.attr("hasError",!0),t.addClass("danger-warn"),!1;t.attr("hasError",!1),$("#"+n+"_error").remove(),t.removeClass("danger-warn")}),window.updateValidationRegex=function(){d=$.extend(!0,{},d,window.siteRegex)}},window.npValidation.restrictInputOnFields=function(e){var t={phone:/[^\d]/g,firstName:/[^\D]/g,lastName:/[^\D]/g},n=window.locale_details.country_code.toUpperCase();["US","CA"].includes(n)&&(t.phone=""),e.on("keydown keyup change input",":input",function(){var e=$(this).val(),n=t[$(this).data("fieldname")];n&&$(this).val(e.replace(n,""))})};var checkForValidationError=function(e,t){0!=$(e).find("label.hasSelect").find("dfn[title=required]").length&&$(e).find("label.hasSelect").addClass("danger");for(var n=$(e).find(":input[class!=optionalField]"),o=0;o<n.length;o++)""!==n[o].value.trim()||n[o].className.includes("btn")||n[o].className.includes("optionalField")?$(n[o]).attr("hasError")&&"false"!==$(n[o]).attr("hasError")||$(n[o]).removeClass("danger-warn"):(t=!1,$(n[o]).addClass("danger-warn"));return t},ongoingValidationStatus=function(){var e=!1;return{setStatus:function(t){e=t},getStatus:function(){return e}}},validationStatus=ongoingValidationStatus();window.npValidation.emailValidationCheck=function(e){var t=Config.LOQATE_EMAIL_VALIDATION_API_ENDPOINT+"?key="+Config.LOQATE_EMAIL_VALIDATION_API_KEY+"&email="+encodeURIComponent(e)+"&timeout=10000";return $.ajax(t).catch(function(e){Sentry.withScope(function(t){t.setTag("errorType","ajaxError"),t.setExtra("ajaxError",JSON.stringify(e)),Sentry.captureException(new Error("Error while validating email"))})})},window.npValidation.countryWithRestrictPostCode={PT:/[^\d-]/g,ES:/[^\d]/g,DE:/[^\d]/g,IT:/[^\d]/g,AT:/[^\d]/g,DK:/[^\d]/g,FI:/[^\d]/g,SE:/[^\d ]/g,CZ:/[^\d]/g,HU:/[^\d]/g,SK:/[^\d]/g,CA:/[^a-zA-Z0-9 ]/g,US:/[^\d-]/g},window.npValidation.restrictPostalCode=function(e,t){var n=e.target.value;t&&(e.target.value=n.replace(t,""))},window.npValidation.restrictUSPostalCode=function(e){var t=e.target.value;t=t.replace(/-/g,""),e.target.value=t.length>5?t.substring(0,5)+"-"+t.substring(5):t},window.npValidation.restrictPhoneNumberWithHyphen=function(e){var t=e.target.value;(t=t.replace(/-/g,"")).length&&t.length>10&&(t=11===t.length&&"0"===t[0]?t.substring(1):t.substring(0,10)),e.target.value=t.length>3?t.substring(0,3)+"-"+(t.length>6?t.substring(3,6)+"-"+t.substring(6):t.substring(3)):t},window.npValidation.maskUSPhoneNo=function(e){e.mask("(999) 999-9999")},window.npValidation.setCursorPositionAtStart=function(e){var t=e.target.value;0===(t=t.replace(/[^\d]/g,"")).length&&e.target.setSelectionRange(1,1)},window.npValidation.validateNameFields=function(e){var t=e.target.value;e.target.value=t.replace(/[^\D]/g,"")};var Config={ENV_NAME:"prd",LAMBDA_FEED_CUSTOMER:"https://feed-customer.api.pens.com/?/customerInformation",LAMBDA_CART:"https://cart.api.pens.com/",LAMBDA_PRODUCT:"https://product.api.pens.com/",LAMBDA_PRODUCT_CDN:"https://cdn-product.api.pens.com/",LAMBDA_PRICING:"https://pricing.api.pens.com/",LAMBDA_PRICING_CDN:"https://cdn-pricing.api.pens.com/",LAMBDA_VALIDATE_DISCOUNT:"https://cimcomm-discounts.api.pens.com/v1/validateCoupon",LAMBDA_CUSTOMIZE:"https://customize.api.pens.com/",LAMBDA_CUSTOMIZE_CDN:"https://cdn-customize.api.pens.com/",LAMBDA_CAP:"https://customization-asset-manager.api.pens.com/",LAMBDA_CREATE_GUEST_CUSTOMER:"https://create-guest-customer.api.pens.com",LAMBDA_UPDATE_GUEST_CUSTOMER:"https://update-guest-customer.api.pens.com",LAMBDA_GET_CUSTOMER:"https://get-customer-list.api.pens.com",LAMBDA_PAYMENT_RESPONSE:"https://payment-response.api.pens.com",LAMBDA_PAYMENT_REQUEST_HPP:"https://payment-request-hpp.api.pens.com/",LAMBDA_PAYLATER:"https://onaccount.api.pens.com/v1/createonaccountorder",LAMBDA_ORDERSTATUS:"https://order.api.pens.com/v1/cart/",LAMBDA_ORDERDETAILS:"https://order.api.pens.com/",LAMBDA_REALEXFORM:"https://realex.api.pens.com/v1/buildrealexjson",LAMBDA_ADYENLINK:"https://adyen.api.pens.com/v1/createPaymentLink",LAMBDA_DESIGN_TEMPLATE_API:"https://cdn-design-template.api.pens.com/v2/getAllTemplates/product/<PRODUCT_ID>?sendColorObject=true&shouldReturnAllData=false&origin=website",ADYEN_SOCKET:"wss://384lfpofmf.execute-api.eu-west-1.amazonaws.com/prd",ORDER_STATUS_CHECK_INTERVAL:2e3,ORDER_STATUS_CHECK_INTERVAL_ADYEN:1e3,REALEX_ENDPOINT:"https://pay.sandbox.realexpayments.com",GDPR_GET_API:"https://customer.api.pens.com/v1/getCustomerEmailPreference",GDPR_PUT_API:"https://customer.api.pens.com/v1/setCustomerEmailPreference",MAIL_FORGOT_PASSWORD_LINK:"https://customer.api.pens.com/v1/sendForgotPasswordMail",NP_API_KEY_CLIENT_JS:"vRHH7Is9zp6FTDuTFanz9CQle89gWVY8augJaFib",NP_API_KEY_HEADER_NAME:"x-api-key",LAMBDA_BRAINTREE:"https://braintree.api.pens.com/v1/paypal",SEPARATOR_CUSTOM_QUANTITY:"|",LAMBDA_SHIPPING_CHARGE:"https://shipping-charge.api.pens.com/",SCENE_API:"https://scenes.documents.cimpress.io/v2/query",PREVIEW_BASE_URL:"https://cdn.rendering.documents.cimpress.io/v1/uds/preview",CREATE_CUSTOMER_PROCESSOR_API:"https://activation-mail.api.pens.com/v1/sendactivationmail",LAMBDA_DISCOUNT_CDN:"https://cdn-discount-code.api.pens.com/",VAT_VALIDATION:"https://vatvalidation.cimpress.io/v1/vatvalidation",VAT_ENABLED_COUNTRY:["IT","BE","FR","NL","HU","SK","CZ"],ADDRESS_MAXLENGTH:30,LAMBDA_PRODUCT_CATEGORY:"https://category.api.pens.com/",MARKETING_INFO_CATEGORY_KEY:"jp-items-by-price",AUTH_TOKEN_URL:"https://api.cimpress.io/auth/anonymous/v1/tokens/",RECAPTCHA_URL:"https://recaptcha.api.pens.com/v1/verify",RECAPTCHA_SITE_KEY:"6LeSh8oZAAAAAOdqeRFiazf0H5ur1WkBDaGzF7tZ",LAMBDA_COMPRESS_IMAGE:"https://cdn-img-compress.api.pens.com/",CUSTOMER_CUSTOM_FIELD_TYPEID:"2e32f7c9-c0b8-499d-b344-639d85cb4295",ALGOLIA_CONFIG:{appId:"E153A8F7PN",apiKey:"426fc77fa7b775e5de982ba6bc8fa8ca"},LOQATE_API_ENDPOINT:"https://api.addressy.com/Cleansing/International/Batch/v1.00/json4.ws",LOQATE_API_KEY:"JM89-NY93-TE12-KP36",LAMBDA_IDP:"https://idp-wrapper.api.pens.com/",UPDATE_CUSTOMER_CUSTOM_FILED:"https://customer.api.pens.com/v1/customer/address/",SITEWIDE_COUPON_API_URL:"https://cdn-sitewide-coupon.api.pens.com/",LOQATE_EMAIL_VALIDATION_API_ENDPOINT:"https://api.addressy.com/EmailValidation/Interactive/Validate/v2.00/json3.ws",LOQATE_EMAIL_VALIDATION_API_KEY:"KN49-DG98-AY19-CY96",CT_RECOMMENDATION_API_KEY:"DI6mub4c8W8z9lG9AyrLG2oWkPuDNCLFcUytcVie",CT_RECOMMENDATION_BASE_URL:"https://personalize.mat.cimpress.io",LAMBDA_FACEBOOK_CONVERSION_API:"https://fb-conversion.api.pens.com/triggerConversionApi",GET_EMAIL_FROM_USER_ID:"https://customer.api.pens.com/v1/oraclecustomernumber"};function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var r=t&&t.prototype instanceof p?t:p,a=Object.create(r.prototype),i=new E(o||[]);return a._invoke=function(e,t,n){var o="suspendedStart";return function(r,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=d(e,t,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function p(){}function u(){}function g(){}var m={};c(m,r,function(){return this});var f=Object.getPrototypeOf,w=f&&f(f(S([])));w&&w!==t&&n.call(w,r)&&(m=w);var h=g.prototype=p.prototype=Object.create(m);function v(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var o;this._invoke=function(r,a){function i(){return new t(function(o,i){!function o(r,a,i,c){var s=d(e[r],e,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then(function(e){o("next",e,i,c)},function(e){o("throw",e,i,c)}):t.resolve(p).then(function(e){l.value=e,i(l)},function(e){return o("throw",e,i,c)})}c(s.arg)}(r,a,o,i)})}return o=o?o.then(i,i):i()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,l;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return u.prototype=g,c(h,"constructor",g),c(g,"constructor",u),u.displayName=c(g,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,a,function(){return this}),e.AsyncIterator=y,e.async=function(t,n,o,r,a){void 0===a&&(a=Promise);var i=new y(s(t,n,o,r),a);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},v(h),c(h,i,"Generator"),c(h,r,function(){return this}),c(h,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return i.type="throw",i.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;b(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,n,o,r,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,o,r,i,c,"next",e)}function c(e){asyncGeneratorStep(a,o,r,i,c,"throw",e)}i(void 0)})}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.logSentry=function(e){Sentry.withScope(function(t){t.setTags({page:e.page,feature:e.feature,operation:e.operation,errorType:e.errorType}),t.setExtras({exception:e.exception,function:e.function,api:e.api}),Sentry.captureException(new Error(e.errorMessage))})},window.np=window.np||{},window.np.loader={show:function(e){var t=e instanceof jQuery,n='<div class="'+(t?"":"lds-overlay-fixed")+' lds-ellipsis"><div></div><div></div><div></div><div></div><div></div><div></div>',o='<div class="'+(t?"":"lds-overlay-fixed")+' lds-overlay"></div>';(e=t?e:$("body")).append(n),e.append(o)},hide:function(e){(e=e instanceof jQuery?e:$("body")).find(".lds-ellipsis").remove(),e.find(".lds-overlay").remove()},isVisible:function(){return $(".lds-overlay").is(":visible")}},window.np.logGaEvent=function(e){"true"==window.localStorage.getItem("enableGaLogging")&&console.log("GA event logged:-",e)},window.np.logFbEvent=function(e,t){"true"==window.localStorage.getItem("enableFbLogging")&&(console.log("FB event logged:-",e),console.log("Response received:",t))},window.np.errorTrackingGaEvent=function(e,t){var n={event:"errors",pageType:e||"",errorDescription:t||""};window.np.logGaEvent(n),window.dataLayer=window.dataLayer||[],window.dataLayer.push(n)},window.np.isInternalUser=function(){return"true"===Cookies.get("fake")||Cookies.get("internalUser")&&"true"===Cookies.get("internalUser")},window.np.setPreferences=function(e,t){"ACTIVE"===t?($("#".concat(e)).prop("checked",!0),$("#".concat(e)).parent().addClass("active")):($("#".concat(e)).prop("checked",!1),$("#".concat(e)).parent().removeClass("active"))},window.np.currencyFormatter=function(e,t){e=e||0,t=t||{};var n={locale:window.np.getLocale("currencyFormatter"),currency:window.currency||"EUR"};return t=Object.assign({},n,window.currencyOverride,t),OSREC.CurrencyFormatter.format(e,t)},window.np.reverseFormatNumber=function(e){var t={locale:window.np.getLocale("currencyFormatter"),currency:window.currency||"EUR"},n=Object.assign({},t,window.currencyOverride,n);return OSREC.CurrencyFormatter.parse(e,n)},window.np.getPriceValue=function(e){return"kr"===e.substring(0,2)?e.substring(2).trim():"CHF"===e.substring(0,3)?e.substring(3).trim():"K"===e[e.length-2]||"k"===e[e.length-2]||"F"===e[e.length-2]||"f"===e[e.length-2]?e.substring(0,e.length-2).trim():Number(e[0])>-1?e.substring(0,e.length-1).trim():(e[0],e.substring(1).trim())},window.np.getRoundedValue=function(e){return e%1==.5?parseInt(e.toString())%2==0?Math.floor(e):Math.ceil(e):Math.round(e)},window.np.newsletterEvent=function(e){var t={event:"signup_newsletter",signup_location:e||""};window.np.logGaEvent(t),window.dataLayer.push(t)},window.np.cacheBustURL=function(e){return e+"&d="+(new Date).getTime()},window.np.getUrlVars=function(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,o){e[n]=o}),e},window.np.resizeImage=function(e,t,n){var o="https://cdn.rendering.documents.cimpress.io/preview?",r="",a="width="+t+"&",i="height="+n+"&";if(e.indexOf("scene.products.cimpress.io")>-1){if(e.indexOf("instructions_uri=")>-1){var c=e.indexOf("instructions_uri");return e.substring(0,c)+a+i+e.substring(c,e.length)}return r=e.split("?")[0],o+a+i+"scene="+encodeURIComponent(r)}if(e.indexOf("instructions_uri=")>-1&&e.indexOf("assets.documents.cimpress.io")>-1)return e+"&"+a+i;if(e.indexOf("scenes.documents.cimpress.io")>-1){var s=(r=e.split("?")[0]).indexOf("/assets/");return r=r.substring(0,s),o+a+i+"scene="+encodeURIComponent(r)+"/index"}if(e.indexOf("rackcdn")>-1){var d;d=t>700?"-zoom":t>400?"-large":t>150?"-medium":t>50?"-small":"-thumb";var l=e.lastIndexOf(".");return e.substring(0,l)+d+e.substring(l)}return e},window.np.getLocale=function(e){window.locale_details=window.locale_details||{};var t,n=window.locale_details.language||"en",o=window.locale_details.country_code||"IE";switch(e){case"currencyFormatter":t=n.toLowerCase()+"_"+o.toUpperCase();break;default:t=n.toLowerCase()+"-"+o.toUpperCase()}return t},window.np.getLocalizedValue=function(e,t,n){t=t||this.getLocale();var o=window.locale_details.language||"en";if(e){if(e[t])return e[t];if(!n&&e[o])return e[o]}return""},window.np.getBrandKeywordData=function(e){try{if(e){var t=unescape(e).split(";"),n={};t.forEach(function(e){e=e.split("~"),n[e[0]]=decodeURIComponent(e[1]||"")}),e=JSON.parse(JSON.stringify(n))}}catch(e){Sentry.captureException(e)}return e},window.np.discountCookieUtils=function(){var e="couponType";return{isProductDiscount:function(){var t=Cookies.get("np.brandKeywordCampaign");if(t){var n=window.np.getBrandKeywordData(t);return!(!n||!n[e]||"product"!==n[e])}return!1}}}(),window.np.getAppliedCouponFromStorage=function(){var e=navigator.cookieEnabled&&window.localStorage.getItem("_appliedCoupon")||"{}";return(e=JSON.parse(e)).coupon},window.np.setAppliedCouponOnStorage=function(e){if(e&&window.user_id&&navigator.cookieEnabled){var t={};t.coupon=e,t.appliedFrom=window.user_id,window.localStorage.setItem("_appliedCoupon",JSON.stringify(t))}},window.np.getUrlParameter=function(e,t){var n=t||location.search;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(decodeURIComponent(n).replace(/[^\x00-\x7F]/g,""));return null===o?null:decodeURIComponent(o[1].replace(/\+/g," "))},window.np.affiliateURLModule=function(){var e=["Affiliate_Window","zanox","awin","affiliate"];return{init:function(){var t;(t=window.np.getUrlParameter("utm_source"))&&-1!==e.indexOf(t)&&(Cookies.get("np.affiliate")||Cookies.set("np.affiliate",!0))},removeCookie:function(){Cookies.get("np.affiliate")&&Cookies.remove("np.affiliate")}}}(),window.np.utils={},window.np.utils.ajaxApiCall=function(e,t,n){var o={url:e,type:"GET"};return $.extend(!0,o,t),new Promise(function(e,t){n&&window.np.loader.show(n),$.ajax(o).done(function(t){e(t)}).fail(function(e){t(e)}).always(function(){n&&window.np.loader.hide(n)})})},window.np.ipadOrTabletDetection=function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();return/(ipad|tablet|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)}},window.np.isMacSafariAndIphoneVerBelow14=function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.indexOf("iPhone")>=0&&navigator.userAgent.match(/OS (\d)?\d_\d(_\d)?/i)[0].split("_")[0].replace("OS ","")<=13,t=navigator.userAgent.indexOf("iPad")>=0&&navigator.userAgent.match(/OS (\d)?\d_\d(_\d)?/i)[0].split("_")[0].replace("OS ","")<=12,n=navigator.userAgent.match(/version\/[0-9]([0-9]|.)/i);return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&navigator.userAgent.indexOf("Macintosh")>=0&&n&&n.length&&parseFloat(n[0].replace("Version/",""))<14||e||t}return!1},window.np.mobileAndTabletDetection=function(){var e,t=!1;return navigator&&navigator.userAgent&&(e=navigator.userAgent,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)),t},window.np.mobileAndTabletDetectionForWidthLessThan1024=function(){return window.innerWidth<=1023},window.np.cookieNotice=function(){var e=Cookies.get("cookieConsent"),t=$(".cookie-notice");void 0===e&&t.slideDown(300),"true"==e&&t.css("display","none");var n=Cookies.get("fake"),o=$(".fake-order-notice");if("true"==n&&o.css("display","block"),"true"==Cookies.get("np.isStaged")){var r=$("#stagedDataNotice").val();$("#fakeOrStageMessage").html(r),o.css("display","block")}},window.np.specialOffer=function(){var e,t,n=(e=function(){var e=Cookies.get("np.brandKeywordCampaign");return!!e&&window.np.getBrandKeywordData(e)},t=function(){return!!e()&&e().couponCode},{init:function(){var e=window.np.getLocale(),n=t(),o=$(".specialOfferBannerWrap");n&&o.length>0&&function(e,t){var n=Config.LAMBDA_DISCOUNT_CDN+"v2/discountcode/getdiscountmessage?messageTypes=bannerMessage&code="+e+"&locale="+t;return new Promise(function(e,t){$.ajax({type:"GET",url:n,contentType:"application/json",dataType:"json",processData:!1}).done(function(t){e(t)}).fail(function(e){t(e)}).always(function(){})})}(n,e).then(function(e){var t=e.messages;t&&t.bannerMessage&&(o.find(".offerTextDiv #banner-message").html(t.bannerMessage),$(".specialOfferBannerWrap").css("display","block"))}).catch(function(e){console.log(e)})}}),o=Cookies.get("np.brandKeywordCampaign");o&&window.np.getBrandKeywordData(o).bannerMessage&&($(".special-offer-notice").css("display","block"),n.init()),$(".special-offer-notice__close").on("click",function(e){e.preventDefault(),$(".special-offer-notice").css("display","none")})};var fnParseUrl=function(e){var t=document.createElement("a");return t.href=e,t};function isObject(e){return null!=e&&"object"===_typeof(e)}window.np.removeMobileScript=function(){window.np.mobileAndTabletDetection()?($('[data-gw-component="widget/fixed-header"]').removeAttr("data-gw-component"),$('[data-gw-component="widget/dropdown"]').removeAttr("data-gw-component")):$('[data-gw-component="widget/readmore"]').removeAttr("data-gw-component")},window.np.getEmailAddressFromUserId=function(e){var t=Config.GET_EMAIL_FROM_USER_ID+"/?customerId=".concat(e);return $.ajax({type:"GET",url:t}).then(function(e){var t,n;return{emailAddress:(null===(t=e.data)||void 0===t?void 0:null===(n=t.customer)||void 0===n?void 0:n.customerEmail)||""}}).catch(function(){return{emailAddress:""}})},window.np.getEmailAddress=function(e){var t=Config.LAMBDA_FEED_CUSTOMER.replace("?",e);return new Promise(function(e,n){$.ajax({type:"GET",url:t,beforeSend:function(e,t){var n=fnParseUrl(t.url);n.hostname&&n.hostname.indexOf("api.pens.com")>-1&&e.setRequestHeader(Config.NP_API_KEY_HEADER_NAME,Config.NP_API_KEY_CLIENT_JS),"beforeSend"in $.ajaxSettings&&$.ajaxSettings.beforeSend(e,t)}}).done(function(t){e(t)}).fail(function(e){n(e)}).always(function(){})})},window.np.identifyUserandDropCookie=function(e){var t=Config.LAMBDA_GET_CUSTOMER+"?email="+e;$.ajax(t).then(function(e,t,n){200===n.status?e&&e.results&&e.results.length>0&&e.results[0].id?window.np.getNumberOfOrdersForUserID(e.results[0].id,window.np.getLocale()).then(function(e){e&&e.UserType?Cookies.set("UserType",e.UserType,{expires:30}):Cookies.set("UserType","ftb",{expires:30})}).catch(function(){Cookies.set("UserType","ftb",{expires:30})}):Cookies.set("UserType","ftb",{expires:30}):(Cookies.set("UserType","ftb",{expires:30}),console.log("identifyUser FAILURE"))}).catch(function(e){console.log("Error in identifyUserandDropCookie",e),Cookies.set("UserType","ftb",{expires:30})})},window.np.getNumberOfOrdersForUserID=function(e,t){var n=Config.LAMBDA_ORDERDETAILS+"ordersinfo/"+e+"/?locale="+t;return new Promise(function(e,t){$.ajax(n).then(function(t,n,o){if(200!==o.status)e({UserType:"ftb"});else{if(t&&t.length>0){for(var r=0,a=t.length;r<a;r++)if(t[r]&&t[r].orderStatus&&"Complete"===t[r].orderStatus&&t[r].paymentStatus&&"Paid"===t[r].paymentStatus||t[r]&&t[r].orderStatus&&("Complete"===t[r].orderStatus||"Open"===t[r].orderStatus||"Confirmed"===t[r].orderStatus))return void e({UserType:"rtb"});return void e({UserType:"ftb"})}e({UserType:"ftb"})}}).catch(function(e){console.log("Error in getNumberOfOrdersForUserID",e),t({UserType:"ftb",error:e})})})},window.np.isIE11=function(){return navigator.appVersion.indexOf("Trident/")>-1},window.np.truncateCounty=function(e,t,n){if(!t||!e)return e;var o=n||"Co.";return-1!=["IE"].indexOf(t)&&0===e.indexOf(o)?e.substring(o.length):e},window.np.getBadgeDetails=function(e){if(e&&e.length>0){var t=e[0],n="",o=!1;if(t.startsWith("sitewide-coupon:")){var r=t.substring(16);window.np.sitewideCoupon&&window.np.sitewidePromoBadge&&window.np.sitewideCoupon===r?n=window.np.sitewidePromoBadge:e.length>1&&(t=e[1])}if(!n&&window.np.localeProductBadges[t]&&window.np.sitewideShippingBadge&&(n=window.np.sitewideShippingBadge,o=!0),n)return o?'\n                    <div class="product-card-badge-container product-card-badge-shipping-container">\n                        <img class="badge-container-img" src='.concat(window.np.shippingIcon,' alt="Shopping Logo"/>\n                        <span class="badge-text">').concat(n,"</span>\n                    </div>\n                "):'\n                <div class="product-card-badge-container">\n                    <img class="badge-container-img" src='.concat(window.np.badgeIcon,' alt="Badge Logo"/>\n                    <span class="badge-text">').concat(n,"</span>\n                </div>\n            ")}return""},window.np.getBadgeContainer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="ExpressShipping"===e,r=window.np.sitewidePromoBadge;if(!e.startsWith("sitewide-coupon:")||e.substring(16)===window.np.sitewideCoupon){var a=window.np.sitewidePromoBadgeShortDescription,i=window.np.sitewidePromoBadgeLongDescription,c="",s="",d="",l="",p="",u="",g="",m="",f="",w="promoBadgeToggle",h="promoBadgeCloseIcon",v="promoBadgeOpenIcon";if(!o||window.np.sitewideShippingBadge&&window.np.expressShippingStatusBasedonProductBadges){o?(r=window.np.sitewideShippingBadge,a=window.np.sitewideShippingBadgeShortDescription,i=window.np.sitewideShippingBadgeLongDescription,p=" product-badge-toggle-express-shipping",u=" promo-badge-long-description-express-shipping-text",g=" promo-badge-container-express-shipping-text",w="expressShippingBadgeToggle",h="expressShippingBadgeCloseIcon",v="expressShippingOpenIcon",c='\n            <div class="promo-badge-code-container">\n                <img class="express-shipping-container-img" src='.concat(window.np.shippingIcon,' alt="Shopping Logo" width="15" height="15" />\n                <span class="promo-badge-code promo-badge-container-express-shipping-text-code">').concat(r,"</span>\n            </div>\n        "),s='\n            <div class="promo-badge-icon">\n                <img id='.concat(h,' class="promo-badge-collapsible-icon" src=').concat(window.np.shippingIconClose,' alt="Shipping Badge Close" width="12" height="8" />\n                <img id=').concat(v,' class="promo-badge-collapsible-icon" style="display:none;" src=').concat(window.np.shippingIconOpen,' alt="Shipping Badge Open" width="12" height="8" />\n            </div>\n        ')):(c='\n            <div class="promo-badge-code-container">\n                <img class="promo-badge-container-img" src='.concat(window.np.promoCouponIcon,' alt="Badge Logo" width="15" height="15" />\n                <span class="promo-badge-code">').concat(r,"</span>\n            </div>\n        "),s='\n            <div class="promo-badge-icon">\n                <img id='.concat(h,' class="promo-badge-collapsible-icon" src=').concat(window.np.promoCouponIconClose,' alt="Promo Badge Close" width="12" height="8" />\n                <img id=').concat(v,' class="promo-badge-collapsible-icon" style="display:none;" src=').concat(window.np.promoCouponIconOpen,' alt="Promo Badge Open" width="12" height="8" />\n            </div>\n        ')),a&&(d='\n            <div class="promo-badge-short-description'.concat(g,'">\n                ').concat(a,"\n            </div>\n        ")),i?(l='\n            <div class="toggle-content promo-badge-long-description'.concat(u,'" style="display:none;">\n                ').concat(i,"\n            </div>\n        "),m=" product-badge-container-pointer"):s="";var y=window.np.mobileAndTabletDetectionForWidthLessThan1024();n?n&&y&&(f=" product-redesign-last-badge-container"):f=" product-redesign-container product-redesign-more-than-one-badge-container",t&&!y&&(f+=" product-redesign-first-badge-container"),$(".product-badge-container").append("<div id=".concat(w,' class="product-badge-toggle').concat(p).concat(f,'">\n            <div class="toggle-heading').concat(m,'">\n                <div class="promo-badge-container">\n                    ').concat(c,"\n                    ").concat(d,"\n                </div>\n                ").concat(s,"\n            </div>\n            ").concat(l,"\n        </div>")),i&&$("#".concat(w)).find(".toggle-heading").click(function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).closest(".product-badge-toggle");t.toggleClass("is-open"),t.hasClass("is-open")?($("#".concat(h)).hide(),$("#".concat(v)).show()):($("#".concat(v)).hide(),$("#".concat(h)).show()),t.find(".toggle-content").slideToggle("200")})}}},window.np.compressImageURL=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.indexOf("rackcdn")>-1||o||e.indexOf("noImageAvailable")>-1?window.np.resizeImage(e,t,n):Config.LAMBDA_COMPRESS_IMAGE+"compress-img?imageUrl="+encodeURIComponent(e)+"&width="+t+"&height="+n},window.np.deepEqual=function(e,t){Object.keys(e).forEach(function(t){return void 0===e[t]&&delete e[t]}),Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]});var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var r=0,a=n;r<a.length;r++){var i=a[r],c=e[i],s=t[i],d=isObject(c)&&isObject(s);if(d&&!window.np.deepEqual(c,s)||!d&&c!==s)return!1}return!0},window.np.isEmptyObject=function(e){return"object"===_typeof(e)&&0===Object.keys(e).length},window.np.englishErrorDescriptionGA=function(e){return{"error_page.500.oops":"Oops!","error_page.500.it_seems":"It seems that something went wrong at our end!","error_page.500.we_are":"We're really sorry please:","error_page.404.oops":"Oops!","error_page.404.we_are_really_sorry":"We’re really sorry","error_page.404.we_are_really_sorry_next_msg":", but we can’t seem to find the page you are looking for. You may be interested in some of our best selling products below.","product_listing.category_no_product_found":"Products coming soon.","product_listing.no_product_found":" Your keyword did not match any products.","product_details.no_value_entered":"Please enter a quantity","product_details.min_items_msg_1st_half":"Minimum order quantity - ","product_details.no_template_result":"No templates found matching keyword","customize.image_format_not_supported":" Image format is not supported.","cusomize.usg_add_to_cart_error_message":"Custom text or logo required.","customize.no_customization":"It looks like you haven’t added your text or logo. If you’d like your imprint on your product, click Add Imprint, otherwise click No Imprint ","customize.no_customization_line_bypass":"It looks like you haven’t added your text or logo. If you’d like your imprint on your product, click Add Imprint"}[e]},window.np.scrollToProduct=function(e){var t=$("#search-result");if(t){var n=t.find("[data-product-id='".concat(e,"']"));try{"scrollBehavior"in document.documentElement.style?window.scrollTo({top:n.offset()?n.offset().top-50:0}):window.scrollTo(0,n.offset()?n.offset().top-50:0)}catch(e){Sentry.withScope(function(t){t.setExtra("exception",e),Sentry.captureException(new Error("Failed to Scroll to Product"))})}}},window.np.promoBannerEvent=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!o)if($("#404errorpage").length)o="error_promo-banner";else if($("#500errorPage").length)o="error_promo-banner";else if($(".coupon_page__title").length)o="national-pen-discount-codes_promo-banner";else if($("#customize-container").length)o="pcp_promo-banner";else if($("#shopping-bag").length)o="cart_promo-banner";else if($("#site-map").length)o="sitemap_promo-banner";else switch((window.location.pathname.split("/")[2]?window.location.pathname.split("/")[2]:"").toLowerCase()){case"c":o="cat_promo-banner";break;case"p":o="pdp_promo-banner";break;case"search":o="search_promo-banner";break;case"s":o=(window.location.pathname.split("/")[3]?window.location.pathname.split("/")[3]:"")+"_promo-banner";break;default:o="hp_promo-banner"}var r={event:"promo_click_estore",coupon_id:e||"",coupon_name:t||"",creative:n||"",position:o};window.np.logGaEvent(r),window.dataLayer=window.dataLayer||[],window.dataLayer.push(r)},window.np.validateUserSelection=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Abc.product.validateSelection(t,n));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),window.np.formatPhoneNumberForNA=function(e){return"("+(e=e.replace(/[^\d]/g,"")).substring(0,3)+") "+e.substring(3,6)+"-"+e.substring(6,10)},window.np.replaceSpecialChars=function(e){return e?e.replace(/[^\d]/g,""):e},$.fn.isInViewport=function(){var e=$(this).offset().top,t=e+$(this).outerHeight(),n=$(window).scrollTop(),o=n+$(window).height();return t>n&&e<o},window.np.getOrderOrigin=function(){return"ABC"},window.np.dispatchGaEvent=function(e){window.np.logGaEvent(e),window.dataLayer.push(e)},window.np.dispatchFbConversionEvent=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"===window.np.isFbConversionEnabled){e.next=2;break}return e.abrupt("return");case 2:return t=getFbConversionPayload(t),e.next=5,generateFbUserData();case 5:t.user_data=e.sent,$.ajax({url:Config.LAMBDA_FACEBOOK_CONVERSION_API,data:JSON.stringify(t),type:"POST",contentType:"application/json"}).done(function(e){window.np.logFbEvent(t,e)}).fail(function(e){0!==e.status&&(window.np.logFbEvent(t,e),Sentry.withScope(function(e){e.setTag("errorType","ajaxError"),e.setExtra("ajaxError",JSON.stringify(error)),Sentry.captureException(new Error("Error in dispatchFbConversionEvent function."))}))});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var generateFbUserData=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,n,o;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!sessionStorage.getItem("np.emailAddress")){e.next=5;break}t=sessionStorage.getItem("np.emailAddress"),e.next=19;break;case 5:if(!Cookies.get("np.ct.user")){e.next=19;break}if(e.prev=6,!(n=Cookies.get("np.ct.user"))){e.next=14;break}return e.next=11,window.np.getEmailAddressFromUserId(n);case 11:o=e.sent,t=o.emailAddress,sessionStorage.setItem("np.emailAddress",t);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),Sentry.captureException(e.t0);case 19:return e.abrupt("return",{client_user_agent:navigator.userAgent,fbc:Cookies.get("_fbc")||null,fbp:Cookies.get("_fbp")||null,em:t.toUpperCase()});case 20:case"end":return e.stop()}},e,null,[[6,16]])}));return function(){return e.apply(this,arguments)}}(),getFbConversionPayload=function(e){var t;return{event_id:e.event_id,event_name:e.event_name,event_time:Math.floor((new Date).getTime()/1e3),custom_data:e.custom_data||{},event_source_url:window.location.href,action_source:"website",site_locale:(null===(t=window.locale_details)||void 0===t?void 0:t.country_code)||""}};function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}window.np.generateEventId=function(){return"event.id_"+Math.round(Date.now())+"_"+Math.round(1e3*Math.random())},window.np.dispatchGaAndFacebookEvent=function(e,t){var n="";"true"===window.np.isFbConversionEnabled&&(n=window.np.generateEventId(),e.fb_event_id=n),window.np.dispatchGaEvent(e),t&&(t.event_id=n,window.np.dispatchFbConversionEvent(t))},$(function(){$.ajaxSetup({beforeSend:function(e,t){var n=fnParseUrl(t.url);n.hostname&&n.hostname.indexOf("api.pens.com")>-1&&e.setRequestHeader(Config.NP_API_KEY_HEADER_NAME,Config.NP_API_KEY_CLIENT_JS)}}),window.np.imageObserver=lozad(".lozad",{threshold:.2,loaded:function(e){$(e).hasClass("promo-img")?$(e).one("load",function(){var e=$(this),t=e.height();e.closest(".slick-list").height(t)}):$(e).hasClass("np-carousel")&&$(e).find("img").one("load",function(){var e=$(this),t=e.height();e.closest(".slick-list").height(t)})}}),window.np.imageObserver.observe(),window.np.affiliateURLModule.init(),window.np.cookieNotice(),window.np.specialOffer(),window.np.removeMobileScript(),Cookies.get("UserType")&&!window.isLoggedIn||(window.user_id?window.np.getNumberOfOrdersForUserID(window.user_id,window.np.getLocale()).then(function(e){e&&e.UserType?Cookies.set("UserType",e.UserType,{expires:30}):Cookies.set("UserType","ftb",{expires:30})}).catch(function(){Cookies.set("UserType","ftb",{expires:30})}):Cookies.set("UserType","ftb",{expires:30}))});var siteLocaleConfig=window.np.getLocale(),isMacSafariAndIphonebelowVer14=window.np.isMacSafariAndIphoneVerBelow14(),productCardConfig={updateFieldsForPackItems:function(e,t){return e.minQty&&(e.minQty=e.minQty*t,e.moqPrice&&(e.moqPrice=Math.round(e.moqPrice/t*100)/100),e.moqSalePrice&&(e.moqSalePrice=Math.round(e.moqSalePrice/t*100)/100)),e},prices:function(e){var t={strikeOut:!1,minQty:0,moqPrice:0,moqSalePrice:0,moqPriceWithCurrency:0,moqSalePriceWithCurrency:0,moqBulkPriceWithCurrency:0,moqBulkSalePriceWithCurrency:0},n=!1;if(e.bundleQty&&e.bundleQty>0&&(n=!0),e&&e.organic){n&&(e.organic=productCardConfig.updateFieldsForPackItems(e.organic,e.bundleQty));var o=e.organic;t.strikeOut=o.isStrikeOut||!1,t.minQty=o.minQty||0,t.moqPrice=o.moqPrice,t.moqSalePrice=o.moqSalePrice,t.moqPriceWithCurrency=window.np.currencyFormatter(Number(o.moqPrice).toFixed(2)),t.moqSalePriceWithCurrency=window.np.currencyFormatter(Number(o.moqSalePrice).toFixed(2)),t.moqBulkPriceWithCurrency=window.np.currencyFormatter(Number(o.moqBulkPrice).toFixed(2)),t.moqBulkSalePriceWithCurrency=window.np.currencyFormatter(Number(o.moqBulkSalePrice).toFixed(2))}return t},templateAndColorsData:function(e){e.templateCount=e.templateCount||0,0===e.templateCount?e.templateCount="":e.templateCount>99?e.templateCount="99+":e.templateCount=e.templateCount.toString(),(!e.productColorClass||0===e.productColorClass.length)&&e.colors&&e.colors.length>0&&(e.productColorClass={value:_toConsumableArray(e.colors)});var t=[];e.colors=function(e){return e&&e.value&&e.value.length&&e.value.length>0?e.value.filter(function(e){return"string"==typeof e}):[]}(e.productColorClass),window.np.plpDisplayColorsToIgnore&&window.np.plpDisplayColorsToIgnore.length&&(e.colors=e.colors.filter(function(e){return-1===window.np.plpDisplayColorsToIgnore.indexOf(e.toLowerCase().split(" ").join(""))}));for(var n=0;n<e.colors.length;n++){if(n+1>window.np.plpDisplayColorLimit){e.extraColors=e.colors.length-window.np.plpDisplayColorLimit;break}t.push(e.colors[n].toLowerCase().split(" ").join(""))}return e.colors=t,e},url:function(e,t){var n="p/"+e.toLowerCase(),o="/"+t.toLowerCase()+"/";return window.locale_details.site_baseurl+"/"+n+o},imageUrl:function(e){return e?window.np.compressImageURL(e,160,160,isMacSafariAndIphonebelowVer14):window.np.clientData.DEFAULT_IMAGE_URL},mainPriceDiv:function(e){var t=e.strikeOut,n=e.minQty,o=e.moqBulkPriceWithCurrency,r=e.moqBulkSalePriceWithCurrency;return"ja-JP"===siteLocaleConfig?t?'\n                <span class="original-price-jp">'.concat(o,'</span>\n                <span class="price-jp sale">').concat(r,"</span>"):'<span class="price-jp">'.concat(o,"</span>"):t?'\n                <span class="price sale">'.concat(r,'</span>\n                <span class="count">/ ').concat(n).concat(window.np.translation.get("productListing","ct"),'</span>\n                <span class="original-price">').concat(o,"</span>"):'\n                <span class="price">'.concat(o,'</span>\n                <span class="count">/ ').concat(n).concat(window.np.translation.get("productListing","ct"),"</span>")},pricePerUnitDiv:function(e){var t=e.strikeOut,n=e.minQty,o=e.moqPriceWithCurrency,r=e.moqSalePriceWithCurrency;return"ja-JP"===siteLocaleConfig?"(単価".concat(t?r:o,"/数量").concat(n,")"):"(".concat(t?r:o," ").concat(window.np.translation.get("productListing","ea"),")")},templateOrColorSwatches:function(e){if(e.templateCount&&""!==e.templateCount){var t="".concat(e.templateCount," ").concat("1"===e.templateCount?window.np.translation.get("productListing","design"):window.np.translation.get("productListing","designs"));return"ja-JP"===siteLocaleConfig&&(t=t.replace(/ /g,"")),'<div class="templates">\n                    <img src ='.concat(window.np.templateColorWheel,' alt="Template Colorwheel">\n                    <span class="product-card-template-container">\n                        ').concat(t,"\n                    </span>\n                </div>")}if(e.colors&&e.colors.length>0&&!0===window.np.showColorSwatch){var n='<div class="color-swatches">';return e.colors.forEach(function(e,t){n+='\n                    <span class="swatch '.concat(e,'" style="background-color: ').concat(e,"; z-index: ").concat(t,';"></span>')}),e.extraColors&&e.extraColors>0&&(n+='\n                    <span class="extra-colors">+'.concat(e.extraColors).concat(window.np.translation.get("productListing","colors"),"</span>")),n+="</div>"}return""},category:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};0!==Object.entries(e).length;){var t=_slicedToArray(Object.entries(e).pop(),2),n=t[0],o=t[1];if(0!==o.length){var r=o.pop();if(r)return r.indexOf(">")>-1?r.split(">").pop().trim():r.trim()}else delete e[n]}return""}};window.npProduct=window.npProduct||{},window.npProduct.getProductCard=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=productCardConfig.templateAndColorsData(e),o=productCardConfig.prices(n.price),r="",a="";o.moqPrice&&o.moqSalePrice&&o.moqPrice!=o.moqSalePrice?(r=o.moqSalePrice,a=o.moqPrice):(r=o.moqPrice,a=-1);var i=productCardConfig.url(n.slug,n.objectID),c=productCardConfig.imageUrl(n.image),s=productCardConfig.mainPriceDiv(o),d=productCardConfig.pricePerUnitDiv(o),l=productCardConfig.templateOrColorSwatches(n),p=window.np.getBadgeDetails(n.burstType),u="",g="";return t?(g="ct-link",u='data-product-list="'.concat(t.placement_title,'"\n            data-product-placement="').concat(t.placement_analytics_id,'"\n            data-recommendation-id="').concat(t.recommendation_id,'"')):u='data-product-list="Category"\n            data-product-list-queryId="'.concat(n.queryID,'"\n            data-pageNumber="').concat(n.pageIndex+1,'"'),'<div class="product-card product-card-redesign">\n        <a href="'.concat(i,'"\n            class="product-card__link ').concat(g,'"\n            id="product-card-').concat(n.id,'"\n            data-prod-name="').concat(n.name,'"\n            data-sku="').concat(n.familyName,'"\n            data-unit-price="').concat(o.moqPriceWithCurrency,'"\n            data-product-brand=""\n            data-product-category="').concat(productCardConfig.category(n.categories),'"\n            data-product-variant=""\n            data-product-position="').concat(n.id,'"\n            data-product-price="').concat(r,'"\n            data-product-default-price="').concat(a,'"\n            data-product-id="').concat(n.objectID,'"\n            ').concat(u,'\n        >\n            <div class="product-card-redesign__inner">\n                ').concat(p,'\n                <div class="product-card__image img-section product-card-inner_image product-card-redesign__image">\n                    <picture class="lozad np-lazy" data-src="').concat(c,'" data-alt="').concat(n.name,'">\n                        <meta content="').concat(c,'">\n                        <source srcset="').concat(c,'">\n                    </picture>\n                </div>\n                <div class="product-card-information">\n                    <div class="first-row">\n                        <div class="product-card-information__name">').concat(n.name,"</div>\n                        ").concat("true"===window.np.isBvInstanceEnabled&&n.webCode&&null!==n.webCode?'<div class="product-card-information__rating">\n                                <div data-bv-show="inline_rating" data-bv-product-id="'.concat(n.webCode,'" data-bv-redirect-url="').concat(i,'"></div>\n                            </div>'):"","\n                        ").concat("ja-JP"===siteLocaleConfig?l:"",'\n                    </div>\n                    <div class="second-row">\n                        <div class="product-card-information__price">\n                            ').concat(s,'\n                        </div>\n                        <div class="product-card-information__extra">\n                            <div class="price-per-unit').concat("ja-JP"===siteLocaleConfig?" jp-font-size":"",'">\n                                ').concat(d,"\n                            </div>\n                            ").concat("ja-JP"!==siteLocaleConfig?l:"","\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </a>\n    </div>")};var getCTImpressionViewMetaData=function(e){var t=[];return e.each(function(e,n){var o=$(n).data();t.push({list:"CT - "+o.productList,name:o.prodName,id:o.sku,category:o.productCategory,listId:o.productPlacement,position:o.productPosition})}),t};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.np=window.np||{},void 0===window.np.GA_CT_UTILS&&(window.np.GA_CT_UTILS={impressionViewStatus:!1,impressionView:function(e){var t={event:"eec.impressionView",ecommerce:{impressions:getCTImpressionViewMetaData(e)}};window.np.logGaEvent(t),window.dataLayer.push(t),window.np.GA_CT_UTILS.impressionViewStatus=!0},impressionClick:function(e){var t={event:"eec.impressionClick",ecommerce:{click:{actionField:{list:"CT - "+e.productList,listId:e.productPlacement},products:{id:e.sku,name:e.prodName,category:e.productCategory,position:e.productPosition,price:e.productPrice,brand:"",variant:""}}}};window.np.logGaEvent(t),window.dataLayer.push(t)}});var isCTInViewport=function(e){if(!e)return!1;var t=e.getBoundingClientRect();return t.top>=0&&t.bottom-350<=(window.innerHeight||document.documentElement.clientHeight)},bindCTImpressionView=function(){window.np&&window.np.CTRecommendations&&window.np.GA_CT_UTILS&&!window.np.GA_CT_UTILS.impressionViewStatus&&isCTInViewport(document.getElementsByClassName("ct-placement-container")[0])&&$(".ct-placement-container > .ct-placement-products").each(function(e,t){try{$(t).hasClass(".slick-initialized")||require(["component/widget/carousel"],function(e){e(t),window.np&&window.np.imageObserver&&window.np.imageObserver.observe()})}catch(e){console.log(e)}var n=$(t).find("a.ct-link");n.length&&(window.np.GA_CT_UTILS.impressionView(n),window.np.CTRecommendations.updateMetric({recommendation_id:n.first().data("recommendation-id"),action:"viewed"}))})},transformCTRecData=function(e){return e.name=e.product_name,e.image=e.product_image_id,e.slug=e.product_link_id.split("/")[3],e.price={currency:e.currency,organic:_objectSpread({},e.prices)},e.webCode=e.web_code,e.burstType=e.badge_reference,e.colors=e.product_color_class,e.productColorClass={value:e.product_color_class||{}},e.categories={level1:[e.category.length?e.category.pop().categoryName:""]},delete e.prices,delete e.product_color_class,delete e.category,delete e.categorySlugs,e},getCTProductCards=function(e,t,n){t.find(".ct-placement-title").html(e.title);var o={placement_analytics_id:e.analytics_id,placement_title:e.title,recommendation_id:e.recommendation_id},r=e.recommendation.splice(0,10).map(function(e,t){try{var n=transformCTRecData(e.websiteContent);return n.id=t+1,n.objectID=e.item_ctools_key,window.npProduct.getProductCard(n,o)}catch(e){console.log(e)}});t.find(".ct-placement-products").addClass("ct-carousel-".concat(n,"col")).data("data-gw-component","widget/carousel").html(r),t.fadeIn(),t.find(".ct-link").ctLinkify(),t.is("#noResults-page-placement1")||(bindCTImpressionView(),$(window).on("scroll",bindCTImpressionView))},getProdKeysFromCart=function(){if(!window.localStorage)return"";var e=[];return(JSON.parse(window.localStorage.getItem("algCartInfo"))||[]).forEach(function(t){t.productKey&&e.push("/".concat(t.productKey.toLowerCase(),"/"))}),Array.from(new Set(e)).join()},CT_COOKIES={USER_ID:"np.ct.user"};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var r=t&&t.prototype instanceof p?t:p,a=Object.create(r.prototype),i=new E(o||[]);return a._invoke=function(e,t,n){var o="suspendedStart";return function(r,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=d(e,t,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function p(){}function u(){}function g(){}var m={};c(m,r,function(){return this});var f=Object.getPrototypeOf,w=f&&f(f(S([])));w&&w!==t&&n.call(w,r)&&(m=w);var h=g.prototype=p.prototype=Object.create(m);function v(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var o;this._invoke=function(r,a){function i(){return new t(function(o,i){!function o(r,a,i,c){var s=d(e[r],e,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then(function(e){o("next",e,i,c)},function(e){o("throw",e,i,c)}):t.resolve(p).then(function(e){l.value=e,i(l)},function(e){return o("throw",e,i,c)})}c(s.arg)}(r,a,o,i)})}return o=o?o.then(i,i):i()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,l;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return u.prototype=g,c(h,"constructor",g),c(g,"constructor",u),u.displayName=c(g,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,a,function(){return this}),e.AsyncIterator=y,e.async=function(t,n,o,r,a){void 0===a&&(a=Promise);var i=new y(s(t,n,o,r),a);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},v(h),c(h,i,"Generator"),c(h,r,function(){return this}),c(h,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return i.type="throw",i.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;b(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,n,o,r,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,o,r,i,c,"next",e)}function c(e){asyncGeneratorStep(a,o,r,i,c,"throw",e)}i(void 0)})}}window.np=window.np||{},void 0===window.np.CT_UTILS&&(window.np.CT_UTILS={saveVisitedRecommendation:function(e,t){var n=JSON.parse(window.localStorage.getItem("visitedRecommendation"))||{};n[e]=t,window.localStorage.setItem("visitedRecommendation",JSON.stringify(n))},isRealUser:function(){return"true"!=Cookies.get("fake")&&(!navigator||-1===navigator.userAgent.toLowerCase().indexOf("pingdomtms")&&-1===navigator.userAgent.toLowerCase().indexOf("cloudwatchsynthetics"))},getUserId:function(){return Cookies.get(CT_COOKIES.USER_ID)||""},setUserId:function(e){return Cookies.set(CT_COOKIES.USER_ID,e,{expires:365}),e},removeUserId:function(){Cookies.remove(CT_COOKIES.USER_ID)},placements:{HOME:function(e){if(e[0]&&e[0].recommendation&&e[0].recommendation.length){var t=$("#home-page-placement");getCTProductCards(e[0],t,4)}},ERROR_PAGE:function(e){if(e[0]&&e[0].recommendation&&e[0].recommendation.length){var t=$("#notFound-page-placement");getCTProductCards(e[0],t,3)}},NO_SEARCH_RESULT:function(e){if(e[0]&&e[0].recommendation&&e[0].recommendation.length){var t=$("#noResults-page-placement1");getCTProductCards(e[0],t,3)}if(e[1]&&e[1].recommendation&&e[1].recommendation.length){var n=$("#noResults-page-placement2");getCTProductCards(e[1],n,3)}else bindCTImpressionView(),$(window).on("scroll",bindCTImpressionView)},PDP:function(e){if(e[0]&&e[0].recommendation&&e[0].recommendation.length){var t=$("#product-details-page-placement");getCTProductCards(e[0],t,4)}},SHOPPING_BAG:function(e,t){if(e[0]&&e[0].recommendation&&e[0].recommendation.length){var n=$("#shopping-cart-page-placement");getCTProductCards(e[0],n,t)}},ORDER_CONFIRMATION:function(e){if(e[0]&&e[0].recommendation&&e[0].recommendation.length){var t=$("#order-confirmation-page-placement");getCTProductCards(e[0],t,3)}}},getRecommendationId:function(e){var t=JSON.parse(window.localStorage.getItem("visitedRecommendation"))||{};return t&&0!==Object.keys(t).length?t[e]:""}}),void 0===window.np.CTRecommendations&&(window.np.CTRecommendations={tenant:"national-pen",getRecommendations:function(e,t){e.tenant=window.np.CTRecommendations.tenant,e.channels="Website",e.customer_id=window.np.CT_UTILS.getUserId()||Cookies.get("np.anonymousId"),e.productsInCart=getProdKeysFromCart(),e.productsOnPage&&(e.productsOnPage=_toConsumableArray(new Set(e.productsOnPage.split(","))).join(","));var n=Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))});fetch("".concat(Config.CT_RECOMMENDATION_BASE_URL,"/personalize?").concat(n.join("&")),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json, charset=UTF-8",lob:"".concat(e.lob),tenant:"".concat(window.np.CTRecommendations.tenant),"x-api-key":"".concat(Config.CT_RECOMMENDATION_API_KEY)}}).then(function(e){return e.json()}).then(function(e){return t(e,null)}).catch(function(e){return t(null,e)})},updateMetric:function(e){fetch("".concat(Config.CT_RECOMMENDATION_BASE_URL,"/recordMetric"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json, charset=UTF-8",tenant:"".concat(window.np.CTRecommendations.tenant),"x-api-key":"".concat(Config.CT_RECOMMENDATION_API_KEY)},body:JSON.stringify({metrics:e}),keepalive:!0})}}),["prd","prod"].includes(Config.ENV_NAME.toLowerCase())||(window.np.CTRecommendations.tenant="national-pen-stage"),function(e){e.fn.ctLinkify=function(){return e(this).each(function(){e(this).on("click",function(t){t.preventDefault();var n=e(this);window.np.CT_UTILS.saveVisitedRecommendation(n.data("product-id"),n.data("recommendation-id")),window.np.GA_CT_UTILS.impressionClick(n.data()),window.np.CTRecommendations.updateMetric({recommendation_id:n.data("recommendation-id"),action:"clicked"}),window.location.href=n.attr("href")})}),this}}(jQuery),$(function(){var e=!1,t=!1,n=!1;$(document).off("mouseenter.tooltip").on("mouseenter.tooltip",".tooltip",function(){if(e=$(this),n=e.attr("title"),t=$('<div class="tooltip-text"></div>'),!n||""===n)return!1;e.removeAttr("title"),t.css("opacity",0).html(n).appendTo("body");var o=function(){$(window).width()<1.5*t.outerWidth()?t.css("max-width",$(window).width()/2):t.css("max-width",350);var n=e.offset().left+e.outerWidth()/2-t.outerWidth()/2,o=e.offset().top-t.outerHeight()-20;n<0?(n=e.offset().left+e.outerWidth()/2-20,t.addClass("left-pos")):t.removeClass("left-pos"),n+t.outerWidth()>$(window).width()?(n=e.offset().left-t.outerWidth()+e.outerWidth()/2+20,t.addClass("right-pos")):t.removeClass("right-pos"),o<0?(o=e.offset().top+e.outerHeight(),t.addClass("top-pos")):t.removeClass("top-pos"),t.css({left:n,top:o}).animate({top:"+=10",opacity:1},50)};o(),$(window).resize(o);var r=function(){t.animate({top:"-=10",opacity:0},50,function(){$(this).remove()}),e.attr("title",n),t.off("click.tooltip"),e.off("mouseleave.tooltip")};return e.off("mouseleave.tooltip").on("mouseleave.tooltip",r),t.off("click.tooltip").on("click.tooltip",r),!0})});var isDesktopEventsAppended=!1;function allCategoriesClickEvent(){$(".all-categories").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(".show-header-container").length?($("#optimizedHeaderAllProductContainer").removeClass("show-header-container"),$("#all-categories-header").removeClass("header-all-products-selected"),$(".header-all-products-icon").removeClass("header-all-products-icon-selected")):($(".header-all-category").removeClass("header-category-hover"),$(".header-category-container").find("[data-list-id=0]").addClass("header-category-hover"),$(".header-sub-category-container").removeClass("header-subcategory-hover"),$("#headerSubCategoryMenu0").addClass("header-subcategory-hover"),showOptimizedHeader())})}function categoryMouseOverEvent(){$(".optimized-header-category-class").on("mouseover",function(e){$(".show-header-container").length&&($("#optimizedHeaderAllProductContainer").removeClass("show-header-container"),$("#all-categories-header").removeClass("header-all-products-selected"),$(".header-all-products-icon").removeClass("header-all-products-icon-selected"));var t=e.currentTarget;if($(t).hasClass("nav-category-header-deals"))$(".optimized-header-category").removeClass("optimized-header-category-selected"),$(t).addClass("optimized-header-category-selected"),$(".deals-sub-menu").css({visibility:"visible",opacity:1}),$(".np-fire-logo").css({fill:"#0A1F8F"});else if($(t).hasClass("optimized-header-category")){var n=$(t).data("index");$(".optimized-header-category").removeClass("optimized-header-category-selected"),$(t).addClass("optimized-header-category-selected"),showOptimizedHeader(!0,n)}})}function categoryMenuCloseEvent(){$(document).on("mouseover",function(e){var t=e.target;"visible"!==$(".deals-sub-menu").css("visibility")||!$(t).closest(".nav-category-header-deals")||$(t).closest(".nav-category-header-deals").length||$(t).hasClass("optimized-header-dropdown")?$(".show-header-container").length&&$("#optimizedHeaderCategoryContainer").hasClass("show-header-container")&&($(t).hasClass("optimized-header-click-handler")||$(t).closest(".show-header-container").length||$(t).hasClass("optimized-header-dropdown")||($("#optimizedHeaderCategoryContainer").removeClass("show-header-container"),$(".optimized-header-category").removeClass("optimized-header-category-selected"))):($(".deals-sub-menu").css({visibility:"hidden",opacity:0}),$(".optimized-header-category").removeClass("optimized-header-category-selected"),$(".np-fire-logo").css({fill:"#000000"}))})}function allCategorySubmenuHoverEvent(){var e=0;$(".header-all-category").on("mouseover",function(t){t.preventDefault(),t.stopPropagation();var n=t.target;clearTimeout(e),e=setTimeout(function(){var e=$(n).closest(".header-all-category").data("listId");$(".header-all-category").removeClass("header-category-hover"),$(n).closest(".header-all-category").addClass("header-category-hover"),$(".header-sub-category-container").removeClass("header-subcategory-hover"),$("#headerSubCategoryMenu".concat(e)).addClass("header-subcategory-hover")},300)}),$(".header-sub-category-main-container").on("mouseover",function(){clearTimeout(e)})}function closeAllCategoryOnClickEvent(){$(document).on("click touchstart",function(e){var t=e.target;$(t).closest(".show-header-container").length||($(".show-header-container").length&&(e.preventDefault(),e.stopPropagation()),$("#optimizedHeaderAllProductContainer").removeClass("show-header-container"),$("#all-categories-header").removeClass("header-all-products-selected"),$(".header-all-products-icon").removeClass("header-all-products-icon-selected"))})}function categoryLinkEvent(){$(".optimized-header-category-class").on("click",function(e){var t=e.currentTarget;window.location.href=$(t).children("a").attr("href")})}function callSearch(e,t){var n="ja-JP"===window.np.getLocale()?1:3,o=document.getElementById("searchText"),r=encodeURIComponent(o.value.trim());if(!(""==r||r.length<n)){var a=t+"?q="+r;window.isProductLoading=!0,window.location.href=a,e.preventDefault()}}function getSearchSuggestion(e){return _getSearchSuggestion.apply(this,arguments)}function _getSearchSuggestion(){return(_getSearchSuggestion=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var n,o,r;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(resetSuggestionList(),$(".search-input .np-loader").show(),n=t.searchKeyword,window.np.algoliaQuerySugIndex){e.next=12;break}if("progress"!==window.np.algoliaClientState){e.next=9;break}return e.next=7,window.np.algoliaClientPromise;case 7:e.next=12;break;case 9:if("not-loaded"!==window.np.algoliaClientState){e.next=12;break}return e.next=12,initAlgoliaClient();case 12:o=window.np.algoliaQuerySugIndex.search(n,{clickAnalytics:!0}),r=window.np.algoliaFeaturePrdIndex.search(n,{filters:'(isMarketableProduct:"true")',clickAnalytics:!0}),Promise.all([o,r]).then(function(e){e&&e.length>0&&(e[0].hits.length>0||e[1].hits.length>0)?proccessProductData(e):$(".search-input .np-loader").hide()}).catch(function(e){window.logSentry({page:"header",feature:"algoliaSearch",operation:"getSearchSuggestion",errorType:"ajaxError",exception:JSON.stringify(e),api:"window.np.algoliaQuerySugIndex.search",function:"getSearchSuggestion",errorMessage:"Error: in getSearchSuggestion function."})});case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function proccessProductData(e){var t=$("#searchTextautocomplete-list"),n=window.np.mobileAndTabletDetection(),o=window.np.ipadOrTabletDetection(),r=n&&!o?2:3;resetSuggestionList();for(var a=e[0].hits?e[0].hits.length>=5?e[0].hits.slice(0,5):e[0].hits:[],i=e[1].hits?e[1].hits.length>=r?e[1].hits.slice(0,r):e[1].hits:[],c=e[1].hits?e[1].queryID:"",s="",d="",l="",p=$("#searchText").attr("data-staticContentRoot"),u=$("#searchText").attr("data-featPrdText"),g=$("#searchText").attr("data-sitebaseurl"),m=window.np.isMacSafariAndIphoneVerBelow14(),f=0;f<a.length;f++)l=a[f]._highlightResult.query.value,s+='\n        <div class="suggest-item">\n            <a id="searchQuery-'.concat(l,'" href="').concat(g,"search?q=").concat(a[f].query,'">\n                <img width="15px" src="').concat(p,'/icon-images/magnifying.svg" />\n                <span class="query-sugtext">').concat(l,"</span>\n            </a>\n        </div>");s='<div class="query-sugestion">'+s+"</div>";for(var w={},h=0;h<i.length;h++){w.name=i[h].name||"",w.image=i[h].image||"",w.price=i[h].price||"",w.slug=i[h].slug||"",w.objectID=i[h].objectID||"";var v={name:i[h].name,familyName:i[h].familyName,categoryName:i[h].categories&&i[h].categories.level1.length>0?i[h].categories.level1[0]:"",salePrice:"",unitPrice:""};i[h]&&i[h].price&&i[h].price.organic&&i[h].price.organic.moqPrice!=i[h].price.organic.moqSalePrice?(v.salePrice=i[h].price.organic.moqSalePrice,v.unitPrice=i[h].price.organic.moqPrice):(v.salePrice=i[h].price.organic.moqPrice||"",v.unitPrice=-1);var y=buyGetDiv(w.price.organic.freeSaleQty?w.price.organic.freeSaleQty:0),_=w.image?window.np.compressImageURL(w.image,160,160,m):"";d+='<div class="product-card">\n            <a id="searchQuery-'.concat(w.objectID,'" onclick="featureProdClick()" href="').concat(g,"p/").concat(w.slug,"/").concat(w.objectID.toLowerCase(),'/" data-prod-name="').concat(v.name,'" data-sku="').concat(v.familyName,'" data-product-brand="" data-product-category="').concat(v.categoryName,'" data-product-position="').concat(h+1,'" data-product-list="Featured Products" data-product-default-price="').concat(v.unitPrice,'" data-product-price="').concat(v.salePrice,'" data-product-id="').concat(i[h].objectID,'" data-product-list-queryId="').concat(c,'">\n            <div class="buy-get-height">').concat(y,'</div>\n            <div class="product-card__inner">\n                <div class="product-card__image img-section product-card-inner_image">\n                    <img src="').concat(_,'" alt="').concat(w.name,'" />\n                </div>\n                <div class="product-card__info">\n                <p class="product-card__name">\n                ').concat(w.name,"\n                </p>\n                ").concat(plainProductCard(w.price),"\n                </div>\n            </div>\n            </a>\n        </div>")}d='<div class="feature-product">\n        <div class="title">\n            <span class="feat-prd-title">'.concat(u,'</span>\n            <span class="horz-line"><span>\n        </div>\n        <div class="product-container">\n            <div class="feat-search-box">\n                <div class="product-grid">\n                    ').concat(d,"\n                </div>\n            </div>\n        </div>\n    </div>"),t.append('<div class="autosearch-container">'+s+d+"</div>"),$("#searchTextautocomplete-list").show()}function plainProductCard(e){var t=formatPrices(e),n="";return t&&t.organic&&(n=plainProductCardHelper(t.organic.isStrikeOut,t.organic)),n}function plainProductCardHelper(e,t){var n=window.np.getLocale(),o=window.np.translation.get("header","for"),r=window.np.translation.get("header","ea"),a=window.np.translation.get("header","lot");return!1===e?"ja-JP"==n?'\n            <div class="product-card__price">\n                <span class="current-price">\n                    <div class="font-size-card">'.concat(t.moqBulkPriceWithCurrency||"",'</div>\n                    <div class="unit-font-style">(').concat(a," ").concat(t.minQty||""," / ").concat(r).concat(t.moqPriceWithCurrency||"",")</div>\n                </span>\n            </div>\n            "):'\n            <div class="product-card__price">\n                <span class="current-price">\n                    <span class="font-weight-card">'.concat(t.minQty||"","</span>\n                    <span>").concat(o,'</span>\n                    <span class="font-size-card">').concat(t.moqBulkPriceWithCurrency||"",'</span>\n                </span>\n                <div class="unit-font-style">(').concat(t.moqPriceWithCurrency||""," ").concat(r,")</div>\n            </div>"):"ja-JP"==n?'\n            <div class="product-card__price">\n                <span class="current-price">\n                    <div class="font-size-card">\n                        <span class="original-price">'.concat(t.moqBulkPriceWithCurrency||"",'</span>\n                        <span class="current-price current-price--sale font-size-card">').concat(t.moqBulkSalePriceWithCurrency||"",'</span>\n                    </div>\n                    <div class="unit-font-style">(').concat(a," ").concat(t.minQty||""," / ").concat(r).concat(t.moqSalePriceWithCurrency||"",")</div>\n                </span>\n            </div>\n            "):'\n            <div class="product-card__price">   \n                <span class="current-price">\n                    <span class="font-weight-card">'.concat(t.minQty||"","</span>\n                    <span>").concat(o,'</span>\n                    <span class="original-price">').concat(t.moqBulkPriceWithCurrency||"",'</span>\n                    <span class="current-price current-price--sale font-size-card">').concat(t.moqBulkSalePriceWithCurrency||"",'</span>\n                </span> \n                <div class="unit-font-style">(').concat(t.moqSalePriceWithCurrency||""," ").concat(r,")</div>\n            </div>")}function updatePromoBanner(){$(".promo-banner-layout").length>0&&(window.np.mobileAndTabletDetection()&&($(".promo-description-mobile").removeClass("hide-promo-div"),$(".promo-description-website").addClass("hide-promo-div"),$(".promo-description-container").removeClass("promo-description-container-website").addClass("promo-description-container-mobile promo-description-container-mobile-layout"),$(".code-container").addClass("hide-promo-div"),$(".offer-container").removeClass("promo-description-container-website").addClass("promo-description-container-mobile offer-container-mobile")),$(".promo-banner-layout").css("visibility","visible"))}function formatPrices(e){if(e&&e.organic){var t=e.organic;e.organic.moqBulkPriceWithCurrency=window.np.currencyFormatter(Number(t.moqBulkPrice).toFixed(2)),e.organic.moqPriceWithCurrency=window.np.currencyFormatter(Number(t.moqPrice).toFixed(2)),e.organic.moqBulkSalePriceWithCurrency=window.np.currencyFormatter(Number(t.moqBulkSalePrice).toFixed(2)),e.organic.moqSalePriceWithCurrency=window.np.currencyFormatter(Number(t.moqSalePrice).toFixed(2))}return e}function buyGetDiv(e){if(0!==e){var t=buyGet(e),n=window.np.getLocale(),o=window.np.translation.get("productListing","buy"),r=window.np.translation.get("productListing","get"),a=window.np.translation.get("productListing","free");if("ja-JP"==n)return'<span class="buy-get">'.concat(t[1]," ").concat(o," ").concat(r," ").concat(t[0]," <span>").concat(a,"</span></span>");if("fr-FR"==n||"fr-BE"==n||"fr-CH"==n){var i;return i=t[1]>1?r+"s "+o+"s,":r+" "+o+",",'<span class="buy-get">'.concat(t[1]," ").concat(i," ").concat(t[0]," <span>").concat(a,"</span></span>")}return'<span class="buy-get">'.concat(o," ").concat(t[1]," ").concat(r," ").concat(t[0]," <span>").concat(a,"</span></span>")}return""}function buyGet(e){var t=function e(t,n){return n?e(n,t%n):t};return[e/(t=t(e,100)),100/t]}function resetSuggestionList(){$(".search-input .np-loader").hide(),$("#searchTextautocomplete-list").empty(),$("#searchTextautocomplete-list").hide()}function fetchMobileHeader(){var e=window.locale_details.site_baseurl+"/mobile-header";$.ajax(e).then(function(e){window.np.mobileHeaderComp=$(e)})}function fetchMiniCartItems(e){e='<span class="cart-text">'+e+"</span>";var t=window.locale_details.site_baseurl+"/mini-cart",n=window.user_id||"";window.isLoggedIn?t+="?anonymousId=null":t=t+"?anonymousId="+n,t=window.np.cacheBustURL(t),$("#site-header .minicart-desktop .sub-menu").empty(),$("#site-header .minicart-desktop a , #site-header .minicart-mobile a .nav-wrapper__title").html(e),$.ajax(t).then(function(t){var n=$(t),o=n&&n[2]&&n[2].attributes["data-item-count"]&&n[2].attributes["data-item-count"].value?n[2].attributes["data-item-count"].value:n?n.attr("data-item-count"):0,r=0==(o=parseInt(o)?o:0)?e+' (<span class="cart-count">0</span><span class="cart-count cart-icon-count">0</span>)':e+' (<span class="cart-count">'+o+'</span><span class="cart-count cart-icon-count">'+o+"</span>)";$("#site-header .minicart a .minicart-desktop").empty(),$("#site-header .minicart-desktop a , #site-header .minicart-mobile a .nav-wrapper__title").html(r);var a=n.children();$("#site-header .minicart-desktop .sub-menu").append(a);var i=$(".ga_productInfo");if(i&&i.length>0){var c=i.map(function(){return $(this).data("gaproductinfo")}).get();navigator.cookieEnabled&&c&&c.length>0&&window.localStorage.setItem("_productHistory",JSON.stringify(c))}$("#site-header .minicart-desktop .sub-menu").attr("data-contentLoaded","true"),window.np.mobileAndTabletDetection()||require(["component/widget/toggle"],function(e){a.find(".toggle").each(function(){e(arguments[1])})});var s=$("#ga_minicart_coupon");if(s&&s.length>0)setCouponCodeInLocalStorage(s.attr("data-ga-minicart-coupon"));else{var d=window.np.getBrandKeywordData(Cookies.get("np.brandKeywordCampaign"));d&&Object.keys(d).length>0&&d.couponCode&&setCouponCodeInLocalStorage(d.couponCode)}if($("#hdnConfigData").val()&&""!=$("#mobileUserInfosdf").val()){$("#desktopUserInfo a").html($("#hdnConfigData").attr("name")),$("#desktopUserInfo a").attr("href",$("#hdnConfigData").val()),$("#mobileUserInfo a .nav-wrapper__title").html($("#hdnConfigData").attr("name")),$("#mobileUserInfo a").attr("href",$("#hdnConfigData").val());var l=$("#hdnConfigData").attr("class");l?($("#desktopUserInfo a").attr("class",l),$("#mobileUserInfo a").attr("class",l)):($("#desktopUserInfo a").removeClass("user-logged-in"),$("#mobileUserInfo a").removeClass("user-logged-in"))}var p=$(".cart-items").length?$(".cart-items").attr("data-cartId"):"";if(p){var u=Config.LAMBDA_CART+"v4/cart/".concat(p,"/recalculate");$.ajax({type:"POST",url:u,dataType:"json"}).catch(function(e){window.logSentry({page:"header",feature:"cartOperations",operation:"fetchCart",errorType:"ajaxError",exception:JSON.stringify(e),api:Config.LAMBDA_CART+"v4/cart/".concat(p,"/recalculate"),function:"fetchMiniCartItems",errorMessage:"Error: while fetching cart"})})}$(document).trigger("mini-cart-loaded")}).catch(function(e){console.log("Error fetching cart details",e)})}function setCouponCodeInLocalStorage(e){if(navigator.cookieEnabled&&e&&window.user_id){var t={};t.coupon=e,t.appliedFrom=window.user_id,window.localStorage.setItem("_appliedCoupon",JSON.stringify(t))}window.np.loader.hide()}function bindHoverEvent(){$(".account-selector-desktop,.minicart.minicart-desktop").hover(function(){$(".country-selector.dropdown .sub-menu").hasClass("is-open")&&($(".country-selector.dropdown .sub-menu").removeClass("is-open"),$(".country-selector.dropdown a").removeClass("active")),$(this).find("a").addClass("active"),$(this).find(".sub-menu").addClass("is-open")},function(){$(this).find("a").removeClass("active"),$(this).find(".sub-menu").removeClass("is-open")})}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function __ga_checkout(e){var t=navigator.cookieEnabled?JSON.parse(window.localStorage.getItem("_productHistory")):[],n=[];if(t&&t.length>0)try{var o=$(".minicart-subtotal").text(),r=$(".minicart-shipping").text(),a=$(".minicart-vat").text(),i=JSON.parse(navigator.cookieEnabled?window.localStorage.getItem("_appliedCoupon"):{})||{};t.forEach(function(e,o){delete t[o].price_total,delete t[o].taxRate,0!==t[o].upsell&&(delete t[o].upsell.price_total,n.push(t[o].upsell),t[o].upsell=0),0!==t[o].accessories&&t[o].accessories.forEach(function(e,r){delete t[o].accessories[r].price_total,n.push(t[o].accessories[r])}),t[o].accessories=0,n.push(t[o])});var c={event:"checkout",checkout_step:1,step_name:"Cart",products:n,revenue:window.np.getPriceValue(o)||0,coupon:i.coupon||"",shipping:window.np.getPriceValue(r)||0,tax:window.np.getPriceValue(a)||0};window.np.dispatchGaAndFacebookEvent(c,{event_name:"InitiateCheckout"})}catch(e){console.log(e)}window.location.href=e}function setCookie(e,t,n){"session"===n?Cookies.set(e,t):(n=Number(n),Cookies.set(e,t,{expires:n}))}function callAdvSearch(e,t){var n=$("#advMinPriceText").val();n=n&&""!=n?window.np.reverseFormatNumber(n)*window.priceMultiplier:0;var o="ja-JP"===window.np.getLocale()?1:3,r=$("#advMaxPriceText").val();r=r&&""!=r?window.np.reverseFormatNumber(r)*window.priceMultiplier:0;var a=$("#advSearchText").val();if(!(""==(a=encodeURIComponent(a.trim()))||a.length<o)){var i;i=0==n&&0==r?t+"?q="+a:0==r?t+"?q="+a+"&filterdata=true&min="+n:t+"?q="+a+"&filterdata=true&min="+n+"&max="+r,window.location.href=i,e.preventDefault()}}function headerEvents(e,t,n){try{var o={event:"nav_click",target:"",label:t||"",loc:n||""};e&&e[0]&&(o.target=e[0].pathname||"",o.label=t||e[0].text.trim()),window.dataLayer=window.dataLayer||[],window.dataLayer.push(o)}catch(e){console.log(e)}}function initAlgoliaClient(){try{return window.np.algoliaClientState="progress",window.np.algoliaClientPromise=new Promise(function(e,t){require(["vendor/algoliasearch/algoliasearch.umd"],function(t){var n=t(Config.ALGOLIA_CONFIG.appId,Config.ALGOLIA_CONFIG.apiKey,{headers:{"X-Algolia-UserToken":window.user_id}}),o="products_"+window.np.getLocale()+"_query_suggestions",r="products_"+window.np.getLocale();window.np.algoliaQuerySugIndex=n.initIndex(o),window.np.algoliaFeaturePrdIndex=n.initIndex(r),window.np.algoliaClientState="loaded",e("true")})}),window.np.algoliaClientPromise}catch(e){window.np.algoliaClientState="not-loaded",console.log("Error in initAlgoliaClient function",e)}}function showOptimizedHeader(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;e?($("#optimizedHeaderCategoryContainer").addClass("show-header-container"),$(".header-sub-category-item-container").removeClass("header-subcategory-hover"),$("#headerSubCategoryMenuItem".concat(t)).addClass("header-subcategory-hover")):($("#optimizedHeaderAllProductContainer").addClass("show-header-container"),$("#all-categories-header").addClass("header-all-products-selected"),$(".header-all-products-icon").addClass("header-all-products-icon-selected"))}function sumArray(e){return e.reduce(function(e,t){return e+t},0)}function partitionList(e,t){if(t<=1)return[e];if(t>=e.length)return Array.from(e,function(e){return[e]});for(var n=[],o=0;o<t-1;o++)n.push(Math.floor((o+1)*e.length/t));for(var r=sumArray(e)/t,a=0,i=null,c=0,s=0;;){for(var d=[],l=0,p=0;p<n.length;p++)d.push(e.slice(l,n[p])),l=n[p];d.push(e.slice(l));for(var u=0,g=-1,m=0;m<d.length;m++){var f=r-sumArray(d[m]);Math.abs(f)>Math.abs(u)&&(u=f,g=m)}if(0===a||Math.abs(u)<a?(a=Math.abs(u),i=d,s=0):s+=1,0===u||s>5||c>100)return i;if(c+=1,0===g)u<0?n[0]-=1:n[0]+=1;else if(g===d.length-1)u<0?n[n.length-1]+=1:n[n.length-1]-=1;else{var w=g-1,h=g;u<0?sumArray(d[g-1])>sumArray(d[g+1])?n[h]-=1:n[w]+=1:sumArray(d[g-1])>sumArray(d[g+1])?n[w]-=1:n[h]+=1}}}function properPartitionListWithEdgeCases(e,t){if(e.length<t)return e;for(var n=0,o=0;o<e.length;o++)if(0!==n){var r=sumArray(e[o]);if(n<r&&(e[o][0]===e[o-1][e[o-1].length-1]||1===e[o][0])){e[o-1].push(e[o].shift()),r=sumArray(e[o-1]);for(var a=o-2;a>=0&&(n=sumArray(e[a]))<r&&(e[a+1][0]===e[a][e[a].length-1]||1===e[a+1][0]);a--)e[a].push(e[a+1].shift()),r=sumArray(e[a])}n=sumArray(e[o])}else n=sumArray(e[o]);return e}function renderHeaderUlElement(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n='<ul class="header-sub-category">',o=e.start,r=e.end,a=e.categoryIndex,i=o;i<=r;i++)n+=$("#headerCategoryList".concat(t).concat(a,"SubCategoryList").concat(t).concat(i))[0].outerHTML;return n+"</ul>"}function renderHeaderSubCategory(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="";return t[e]&&(o=renderHeaderUlElement(t[e],n)),'<div class="header-sub-category-container-partition">'.concat(o,"</div>")}function initilizedOptimizedCategoryData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var n in e)if(e[n].length){for(var o=properPartitionListWithEdgeCases(partitionList(e[n],4),4),r=[],a=[],i=1,c=0,s="",d=0;d<o.length;d++)r.push(sumArray(o[d]));for(var l=0;l<r.length;l++)c+=r[l],a.push({start:i,end:c,categoryIndex:n}),i+=r[l];for(var p=0;p<4;p++)s+=renderHeaderSubCategory(p,a,t);$("#headerSubCategoryMenu".concat(t).concat(n)).html(s)}}function featureProdClick(){var e=document.getElementById("searchText");return e&&e.value&&window.localStorage.setItem("_site_search",e.value.trim()),!0}$(window).resize(function(){window.innerWidth>=1024&&1==window.np.isInitiallyMobile&&0==isDesktopEventsAppended&&(isDesktopEventsAppended=!0,initilizedOptimizedCategoryData(window.categoryListing,""),initilizedOptimizedCategoryData(window.categoryListingItem,"Item"),allCategoriesClickEvent(),categoryMouseOverEvent(),categoryMenuCloseEvent(),categoryLinkEvent(),allCategorySubmenuHoverEvent(),closeAllCategoryOnClickEvent())}),window.np.algoliaClientState="not-loaded",$(".search-input > #searchText").on("click",function(){"not-loaded"===window.np.algoliaClientState&&initAlgoliaClient()}),$("#searchText").keyup(function(e){e.preventDefault();var t=e.target.value.trim(),n="ja-JP"===window.np.getLocale()?0:2;if(t&&t.length>n&&13!=e.which){$("#searchTextautocomplete-list").empty();var o=e.target.attributes["data-searchUrl"].value;getSearchSuggestion({searchKeyword:t,regionLocale:window.np.getLocale(),currency:window.locale_details.currency},o)}else resetSuggestionList()}),document.addEventListener("click",function(e){window.np.mobileAndTabletDetection()?-1==e.currentTarget.activeElement.id.indexOf("searchQuery-")&&resetSuggestionList():resetSuggestionList()}),bindHoverEvent(),function(){var e=window.np.getUrlVars().utm_source;e=e?e.toLowerCase():"",navigator.cookieEnabled&&(e&&"email"==e?window.sessionStorage.setItem("utm_source",capitalizeFirstLetter(e)):"Email"!=window.sessionStorage.getItem("utm_source")&&window.sessionStorage.setItem("utm_source","Web"))}(),$(document).ready(function(){if(window.np&&"ja-JP"==window.np.getLocale()&&window.np.getUrlParameter("min")){var e=window.np.getUrlParameter("min")/window.priceMultiplier;if($("#advMinPriceText").val(e),window.np.getUrlParameter("max")){var t=window.np.getUrlParameter("max")/window.priceMultiplier;$("#advMaxPriceText").val(t)}}$(".carousel-hero a").on("click",function(){headerEvents($(this),$(".carousel-hero img")[0].alt,"hero");var e=this&&this.dataset&&this.dataset.coupondesc?this.dataset.coupondesc:"",t="hp_promo-banner-"+(this&&this.dataset&&this.dataset.slickIndex&&!isNaN(this.dataset.slickIndex)?Number(this.dataset.slickIndex)+1:"");window.np.promoBannerEvent(e,e,t)}),$(".visual-nav a").on("click",function(){var e={event:"nav_click",target:"",label:"",loc:"featured"};$(this)&&$(this)[0]&&(e.target=$(this)[0].pathname||""),window.dataLayer.push(e)}),$(".logo_mobile a").on("click",function(){headerEvents($(this),"National Pen","header")}),$(".logo a").on("click",function(){headerEvents($(this),"National Pen","header")}),$(".minicart-desktop a").on("click",function(){headerEvents("",$(this)[0]?$(this)[0].text.split(" ")[0].trim():"","header")}),$(".minicart-mobile a").on("click",function(){var e=$(this)[0]?$(this)[0].text.split(" ")[0].trim():"";headerEvents($(this),e,"header")}),$(".quick_shopping_links_row a").on("click",function(){headerEvents($(this),"","header")}),$(".country-list a").on("click",function(){headerEvents($(this),"","header")}),$(".phone-contact a").on("click",function(){headerEvents($(this),$(".phone-contact-desktop").text(),"header")}),$(".top-nav-contact a").on("click",function(){headerEvents($(this),"","header")}),$("#desktopUserInfo a").on("click",function(){headerEvents($(this),"","header")}),$("#mobileUserInfo a").on("click",function(){headerEvents($(this),"","header")}),$(".header-bottom-list li a").on("click",function(){headerEvents($(this),"","main_nav")}),$(".navigation-menu a:not(.subnavigation__back-link)").on("click",function(){headerEvents($(this),"","main_nav")}),$(".navigation-menu__link").on("click",function(){var e="";$(this)[0]&&$(this)[0].previousSibling&&(e=$(this)[0].previousSibling.text),headerEvents("",e,"main_nav")}),$("#advSeachBox").click(function(){event.stopPropagation()}),$("#adv-search-btn").click(function(){event.stopPropagation();var e=$("#searchText").val()||"";""==e?$("#advSearchSubmit").attr("disabled",!0):$("#advSearchSubmit").attr("disabled",!1),$("#advSearchText").val(e),$("#advSeachBox").slideDown("fast")}),$("#advSearchText").keyup(function(){""==$("#advSearchText").val()?$("#advSearchSubmit").attr("disabled",!0):$("#advSearchSubmit").attr("disabled",!1)}),$("#clearAdvSearch").click(function(){$("#advSearchText").val(""),$("#advMinPriceText").val(""),$("#advMaxPriceText").val("")}),$("#countries-dropdown-window").click(function(){$("#searchTextautocomplete-list").empty()}),$("[id^=advCloseBtn]").click(function(){event.stopPropagation(),$("#advSeachBox").slideUp("fast")}),$("#site-wrapper").click(function(){$("#advSeachBox").slideUp("fast")}),$(".promo-banner-layout").length>0&&$(".promo-description-container, .offer-container").on("click",function(){var e=$(".promo-banner-code").data("promocouponcode"),t=window.np.mobileAndTabletDetection()?$(".promo-description-mobile").data("promodesc"):$(".promo-description-website").data("promodesc");window.np.promoBannerEvent(e,t,"sitewide_promo-banner")}),window.innerWidth<1024?($(".search-input button").on("click",function(){return!!$("#searchText").hasClass("expand-search")||($("#searchText").addClass("expand-search").focus().parents(".search-input").addClass("open").parents("body, html").addClass("scroll-hidden"),$(".navigation-icon-menu-wrapper, .logo_mobile, .site-navigation-wrapper").addClass("animate"),$(".close-btn").addClass("active"),!1)}),$(".close-btn").on("click",function(e){e.preventDefault(),$(this).removeClass("active"),$("#searchText").removeClass("expand-search").parents(".search-input").removeClass("open").parents("body, html").removeClass("scroll-hidden"),$(".navigation-icon-menu-wrapper, .logo_mobile, .site-navigation-wrapper").removeClass("animate")})):(allCategoriesClickEvent(),allCategorySubmenuHoverEvent(),closeAllCategoryOnClickEvent(),categoryMouseOverEvent(),categoryLinkEvent(),categoryMenuCloseEvent(),initilizedOptimizedCategoryData(window.categoryListing,""),initilizedOptimizedCategoryData(window.categoryListingItem,"Item"),isDesktopEventsAppended=!0),updatePromoBanner()});var cust_id,pages={activation:window.np.translation.get("signIn","activationLink"),order_confirmation:window.np.translation.get("signIn","orderConfirmationLink"),checkout_shipping:window.np.translation.get("signIn","checkoutShipping")},CREATE_CUSTOMER_PROCESSOR_API=Config.CREATE_CUSTOMER_PROCESSOR_API;$(document).ready(function(){var e=navigator.cookieEnabled&&localStorage&&localStorage.hasOwnProperty("customerAddress")?localStorage.getItem("customerAddress"):null;if(e){var t=JSON.parse(e);for(var n in t)if(n){if("select"==$("#"+n).attr("type")){$("#"+n+"option:selected").attr("selected",null),$("#"+n+"option[value=addressObj[i]]").attr("selected","selected");continue}$("#"+n).attr("value",t[n])}localStorage.removeItem("customerAddress")}});var showLoginError=function(e){$("#signInForm_error").remove(),$("#signInForm_error_modal").remove(),$('.log-in input[type="submit"]').prop("disabled",!1),$(".loginDiv").after('<div id="signInForm_error" class="error">'.concat(e,"</div>")),isLoggedIn=!1,$("#sign-in-btn-modal").after('<div id="signInForm_error_modal" class="error">'.concat(e,"</div>"))},resetLoginForm=function(){var e=$('input[id^="email-sign-in"]');$("#log-in-modal input").removeClass("danger-warn"),$("#log-in-modal #error-login").remove(),$("#log-in-modal .error").remove(),$("#registered_user_message").addClass("hidden"),$("#sign-in-btn").prop("disabled",!1),$("#sign-in-btn-modal").prop("disabled",!1);var t,n=$("#user-email").val()?$("#user-email").val().trim():"";$("#user-email").hasClass("danger-warn")&&(e.after('<div id="email-sign-in-modal_error" class="error">'+window.np.translation.get("signIn","emailDataError")+"</div>"),e.attr("hasError",!0),e.addClass("danger-warn")),e.val(n),$(".password-sign-in").val(""),(t=""===n?e:$('input[id="password-sign-in-modal"]').val()?$('input[id="sign-in-btn-modal"]'):$('input[id="password-sign-in-modal"]'))&&setTimeout(function(){t.focus()},200)};$('input[id^="email-sign-in"]').on("blur",function(){$("#email-sign-in_error").length>0&&window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","email_errorGA"))}),$("#email-sign-in-modal").on("blur",function(){$("#email-sign-in-modal_error").length>0&&window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","email_errorGA"))});var logIn=function(){var e=!1,t=$('input[id^="email-sign-in"]'),n=$('input[id^="password-sign-in"]');$("#error-login").remove(),$('input[id^="sign-in-btn"]').prop("disabled",!0);var o=t.val().trim().toLowerCase();o?0==$('input[id^="email-sign-in"] ~ #email-sign-in_error').length&&t.removeClass("danger-warn"):t.addClass("danger-warn");var r=n.val().trim();r?n.removeClass("danger-warn"):n.addClass("danger-warn"),$('div[id^="signInForm_error"]').remove();var a=!0;a=checkForValidationError("#loginForm",a);var i=$("#loginForm").find("[hasError=true]");if(a&&i&&0==i.length)if($('div[id^="signInForm_error"]').remove(),o&&r){window.np.loader.show(),$("#stay-loggedIn").hasClass("remember-me")&&(e=!0);var c={email:o,password:r,staySignedIn:e,locale:window.np.getLocale()};window.user_id?Abc.order.getCart(window.user_id,!1).then(function(e){var t=this;if(e&&404===e.statusCode)doLogin(t.payload);else if(e&&e.id){var n=e.customerId,r=Config.LAMBDA_GET_CUSTOMER+"?email="+o;$.ajax(r).then(function(o,r,a){if(200===a.status){if(o.results&&o.results[0]){var i=o.results[0].id;n===i?doLogin(c):(t.payload.anonymousCartId=e.id,doLogin(t.payload))}}else t.payload.anonymousCartId=e.id,doLogin(t.payload)}).catch(function(n){window.np.loader.hide(),t.payload.anonymousCartId=e.id,doLogin(t.payload),window.logSentry({page:"login",feature:"login",operation:"login",errorType:"ajaxError",exception:JSON.stringify(n),api:Config.LAMBDA_GET_CUSTOMER,function:"login",errorMessage:"Error: while fetching customer details"})})}}.bind({payload:c})).catch(function(e){$('input[id^="sign-in-btn"]').prop("disabled",!1),showLoginError(window.np.translation.get("signIn","loginError")),window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","loginErrorGA")),window.np.loader.hide(),window.logSentry({page:"login",feature:"login",operation:"login",errorType:"ajaxError",exception:JSON.stringify(e),api:"Abc.order.getCart",function:"login",errorMessage:"Error: while fetching cart"})}):doLogin(c)}else $('input[id^="sign-in-btn"]').prop("disabled",!1);else $('div[id^="signInForm_error"]').remove(),$('input[id^="sign-in-btn"]').prop("disabled",!1),$(".loginDiv").after('<div id="signInForm_error" class="error">'+window.np.translation.get("signIn","mandatoryError")+"</div>"),isLoggedIn=!1,$("#sign-in-modal-btn").after('<div id="signInForm_error_modal" class="error">'+window.np.translation.get("signIn","mandatoryError")+"</div>"),window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","mandatoryErrorGA"))},user=function(){var e=null;return{setDetails:function(t){t&&(e=t)},isRegisteredUser:function(){return"registeredUser"===((t=e)&&t.customer&&t.customer.custom&&t.customer.custom.fields&&t.customer.custom.fields.customerStatus?t.customer.custom.fields.customerStatus:"");var t},updateStatusToNewUser:function(){var t=[{action:"setCustomField",name:"customerStatus",value:"newUser"}],n={id:e.customer.id,version:parseInt(e.customer.version)};serviceWrapper.updateCustomer(n,t).then().catch(function(e){var t=e.errorMessage?e.errorMessage:"Update Customer Status Failed while updating customer";Sentry.captureMessage(t,"error")})}}}(),serviceWrapper={updateCustomer:function(e,t){return window.Abc.account.updateCustomer(e,t)}},redirectToAccountPage=function(){var e=window.np.translation.get("signIn","myAccountLink");window.location.href=getBaseUrl()+"/"+e},isInternalEmail=function(e){var t=(window.np.internalTrafficRemovalEmailList||"").split(",");return e&&(e.endsWith("@pens.com")||e.endsWith("@goldstarpens.com")||e.endsWith("@mailinator.com")||t.includes(e))},mergeUserProfile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e.email||!e.anonymousId||!t)return Promise.reject("Missing anonymousId, emailId or token.");var n=Config.LAMBDA_CAP+"v1/updateuserlogobyanonymousid";return $.ajax({type:"POST",url:n,contentType:"application/json",data:JSON.stringify(e),beforeSend:function(e){e.setRequestHeader("Authorization",t)}})},doLogin=function(e){requestLogin(e).then(function(e){if(e)if(e.result&&"success"===e.result.toLowerCase()){var t;user.setDetails(e),e.cart&&e.cart.id&&Cookies.set("np.cartId",e.cart.id);var n=(null===(t=e.customer)||void 0===t?void 0:t.email)||"";if(n&&(sessionStorage.setItem("np.emailAddress",n),isInternalEmail(n)&&Cookies.set("internalUser",!0)),e.customer.isEmailVerified){window.dataLayer=window.dataLayer||[];var o={event:"login"};if(window.np.logGaEvent(o),window.dataLayer.push(o),Cookies.get("EmailFraud")&&Cookies.remove("EmailFraud"),window.countryCode&&["US","CA"].includes(window.countryCode.toUpperCase())){var r=$("#sign-in-btn").attr("data-token"),a={anonymousId:Cookies.get("np.anonymousId"),email:sessionStorage.getItem("np.emailAddress")};mergeUserProfile(a,r).catch(function(e){0!==e.status&&window.logSentry({page:"login",feature:"login",operation:"login",errorType:"ajaxError",exception:JSON.stringify(e),api:"".concat(Config.LAMBDA_CAP,"v1/updateuserlogobyanonymousid"),function:"doLogin",errorMessage:"Error: failed to merge anonymous user profile with email profile"})})}window.np.getNumberOfOrdersForUserID(e.customer.id,window.np.getLocale()).then(function(e){e&&e.UserType?Cookies.set("UserType",e.UserType,{expires:30}):Cookies.set("UserType","ftb",{expires:30})}).catch(function(e){Cookies.set("UserType","ftb",{expires:30}),404!==e.error.status&&window.logSentry({page:"login",feature:"login",operation:"login",errorType:"ajaxError",exception:JSON.stringify(e),api:"window.np.getNumberOfOrdersForUserID",function:"doLogin",errorMessage:"Error: while fetching orders"})}).finally(function(){Cookies.remove("np.anonymousId"),window.np&&window.np.CT_UTILS&&window.np.CT_UTILS.setUserId(e.customer.id),window.algolia.updateAlgoliaCartInfo(e.cart&&e.cart.lineItems);var t=document.referrer,n=getUrlParameter("redirect_uri");void 0===n||""===n.trim()||isUrlAbsolute(n)||(n=getBaseUrl()+"/"+n);var o=t.split(getBaseUrl()+"/"),r=window.location.href.split("/").pop();r=decodeURIComponent(r);var a=pages.checkout_shipping?pages.checkout_shipping.trim():"";if(r.indexOf(a)>-1){var i={};$("#delivery-address-fields input").each(function(){var e=$(this)[0];e.id&&(i[e.id]=e.value)}),$("#delivery-address-fields select").each(function(){var e=$(this)[0];e.id&&(i[e.id]=e.value)}),navigator.cookieEnabled&&localStorage.setItem("customerAddress",JSON.stringify(i)),$.magnificPopup.instance&&$.magnificPopup.instance.close(),window.location.reload()}else o[1]!==a&&user.isRegisteredUser()?(user.updateStatusToNewUser(),redirectToAccountPage()):n&&0==n.indexOf(getBaseUrl())?window.location=n:o[1]&&""!==o[1]&&!o[1].includes(pages.activation)?window.location.href=getBaseUrl()+"/"+o[1]:window.location.href=getBaseUrl()+"/"})}else window.np.loader.hide(),cust_id=e.customer.id,showLoginError(window.np.translation.get("signIn","emailNotVerified")+'<a class="capitalize-first-letter" href="javascript:redirectToActivationPage()"> '+window.np.translation.get("signIn","emailNotVerified1")+"</a>"),window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","emailNotVerifiedGA")),Abc.auth.logout()}else window.np.loader.hide(),showLoginError(window.np.translation.get("signIn","emailPasswordError")),window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","emailPasswordErrorGA"));$('.log-in input[type="submit"]').prop("disabled",!1)}).catch(function(e){$('.log-in input[type="submit"]').prop("disabled",!1),showLoginError(window.np.translation.get("signIn","loginError")),window.np.errorTrackingGaEvent("sign-in",window.np.translation.get("signIn","loginErrorGA")),window.np.loader.hide(),window.logSentry({page:"login",feature:"login",operation:"login",errorType:"ajaxError",exception:JSON.stringify(e),api:window.abcBaseURL+"/.rest/auth/login",function:"doLogin",errorMessage:"Error: while login"})})},requestLogin=function(e){var t=window.abcBaseURL+"/.rest/auth/login";return $.ajax({type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e)})},isUrlAbsolute=function(e){return 0===e.indexOf("//")||-1!==e.indexOf("://")&&-1!==e.indexOf(".")&&-1!==e.indexOf("/")&&!(e.indexOf(":")>e.indexOf("/"))&&e.indexOf("://")<e.indexOf(".")},getUrlParameter=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},redirectToActivationPage=function(){var e={cust_id:cust_id,locale:window.np.getLocale()};$.ajax({type:"POST",url:CREATE_CUSTOMER_PROCESSOR_API,contentType:"application/json",data:JSON.stringify(e)}).then(function(e,t,n){200===n.status?window.location.href=getBaseUrl()+"/"+window.np.translation.get("signup","activation-link")+"?id="+cust_id:window.logSentry({page:"login",feature:"login",operation:"redirectToActivationPage",errorType:"ajaxError",exception:JSON.stringify(e),api:CREATE_CUSTOMER_PROCESSOR_API,function:"redirectToActivationPage",errorMessage:"Error: failed to send activation link"})})},logout=function(){window.np.loader.show(),Abc.auth.logout().then(function(){Cookies.remove("np.anonymousId"),Cookies.remove("np.cartId"),Cookies.remove("internalUser"),sessionStorage.removeItem("np.emailAddress"),localStorage&&localStorage.setItem("algCartInfo",JSON.stringify([])),window.np&&window.np.CT_UTILS&&window.np.CT_UTILS.removeUserId(),shouldRedirectToHomePage()?window.location.href=getBaseUrl()+"/":window.location.reload()}).catch(function(e){window.np.loader.hide(),window.logSentry({page:"login",feature:"login",operation:"logout",errorType:"ajaxError",exception:JSON.stringify(e),api:"Abc.auth.logout",function:"logout",errorMessage:"Error: while logging out"})})},toggleRememberMe=function(){$("#stay-loggedIn").hasClass("remember-me")?$("#stay-loggedIn").removeClass("remember-me"):$("#stay-loggedIn").addClass("remember-me")},shouldRedirectToHomePage=function(){var e=window.location.href.split("/").pop(),t=pages.checkout_shipping;return!(!e||!(e.indexOf(pages.order_confirmation)>-1||e.indexOf(t)<=-1))},getBaseUrl=function(){return window.locale_details.site_baseurl},isLoggedIn=window.isLoggedIn,onSignInClick=function(e){isLoggedIn||(isLoggedIn=!0,logIn()),e.preventDefault()};$("#loginForm").submit(onSignInClick),$(document).ready(function(){window.dataLayer=window.dataLayer||[];var e={event:"dataLayer_initialize",user_id:Cookies.get("np.ct.user")?Cookies.get("np.ct.user"):Cookies.get("np.anonymousId"),np_user:"true"===Cookies.get("fake"),login:!!Cookies.get("np.ct.user"),consent:"true"===Cookies.get("cookieConsent"),ftb:"ftb"===Cookies.get("UserType")?1:0,country:window.locale_details.country_code||"",language:window.locale_details.language||"",currency:window.locale_details.currency||"",page_type:window.np.pageName.get(),web_traffic_type:"external"};e.user_id||(e.user_id=window.user_id),window.np&&window.np.isInternalUser&&window.np.isInternalUser()&&(e.web_traffic_type="internal"),window.np.dispatchGaAndFacebookEvent(e,{event_name:"PageView"});var t=function(e,t){var n={event:t||"product_impression",list:$(e[0]).attr("data-product-list")?$(e[0]).attr("data-product-list"):$(e[0]).attr("data-prod-placement")||"",products:[]};$(e).each(function(e,t){var o={sku:$(t).attr("data-product-sku")||"",class:$(t).attr("data-sku")||"",name:$(t).attr("data-prod-name")||"",category:$(t).attr("data-product-category")||"",position:$(t).attr("data-product-position")||"",price:"",sale:"N",price_sale:""};$(t).attr("data-product-default-price")&&$(t).attr("data-product-price")&&$(t).attr("data-product-default-price")>0?(o.sale="Y",o.price_sale=$(t).attr("data-product-price"),o.price=$(t).attr("data-product-default-price")):o.price=$(t).attr("data-product-price"),n.products.push(o)}),window.dataLayer=window.dataLayer||[],window.np.logGaEvent(n),window.dataLayer.push(n)};window.onload=function(){$(".product-card > a:not(.ct-link)").length>1&&t($(".product-card > a"),"")};var n="";$("#searchText").on("change",function(){$(".feature-product .product-grid>.product-card> a").length>0&&(n=$(".feature-product .product-grid>.product-card> a"))}),$(".search-input>button.noSelect").on("click",function(){$(".feature-product .product-grid>.product-card> a").length>0&&t($(".feature-product .product-grid>.product-card> a"),"")}),$(document).on("click",".suggest-item a",function(){t(n,"")}),$(document).on("click",".feat-search-box .product-card a",function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return""!=t?"products_"+e+"_"+t:"products_"+e}(window.np.getLocale());sessionStorage.setItem("alg_search","true");var o=$(this).attr("data-product-id")||"",r=$(this).attr("data-product-list-queryid")||"",a=$(this).attr("data-product-position")||0;!function(e){sessionStorage.setItem("algProductInfo",JSON.stringify(e))}({index:e,queryId:r}),window.algolia.sendSearchResultClickedEvent(e,window.user_id,o,r,Number(a)),t(n,""),t($(this),"product_click")})});